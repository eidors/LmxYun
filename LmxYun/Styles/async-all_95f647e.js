define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/getData.js",function(e,t,a){"use strict";var c=e("function-widget-1:shareDir/context.js").getContext(),n=e("base:widget/libs/jquerypacket.js"),r=function(e){n.ajax({type:e.type||"get",url:e.url,dataType:e.dataType||"json",timeout:3e3,data:n.extend(e.data,{t:(new Date).getTime()}),success:function(t){var a=null;try{a=n.parseJSON(t)||t}catch(c){}0===a.errno?"function"==typeof e.succCallback&&e.succCallback.call(e.succCallback,a):i(e.failCallback,a)}}).error(function(t){var a=null,c=null;t&&(a=t.error_code,c=t.responseText);try{c=n.parseJSON(t.responseText)}catch(r){}i(e.failCallback,c)})},i=function(e,t){"function"==typeof e?e.call(e,t):(disk.DEBUG&&console.log(""),c.ui.tip({mode:"caution",msg:"网络错误，请稍候重试"}))};a.exports=r});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/searchUserService.js",function(e,i,r){"use strict";var c,a=e("function-widget-1:shareDir/context.js").getContext(),n=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/getData.js"),o=e("base:widget/libs/jquerypacket.js"),t=function(e){this.query=e.query,this.verifyCancelFunc=e.verifyCancelFunc,this.whenVerifyCodeDialog=e.whenVerifyCodeDialog,this.searchSuccFunc=e.searchSuccFunc,this.searchFailFunc=e.searchFailFunc,this.hasError=!1,this.flagFirst=!0,this.vcode=null,this.input=null,this.$shareDailog=o("#share")};t.SEARCH_RUL="/api/user/search",t.prototype.searchUser=function(){this.flagFirst===!0&&a.ui.tip({mode:"loading",msg:"正在搜索用户",autoClose:!1});var e=this,i={};i=null===e.vcode&&null===e.input?e.query:o.extend(e.query,{input:e.input,vcode:e.vcode}),n({url:t.SEARCH_RUL,data:i,succCallback:function(i){e.flagFirst=!0,a.ui.hideTip(),"function"==typeof e.searchSuccFunc&&e.searchSuccFunc.call(e.searchSuccFunc,i)},failCallback:function(i){var r="网络错误，请稍候重试";a.ui.hideTip(),i&&-19===i.errno?(e.isVerifyCode&&(e.hasError=!0),e.showVerifyDialog(i.img,i.vcode)):(i&&-80===i.errno&&(r="朋友虽好，可别贪多。明天再来搜吧"),a.ui.tip({mode:"caution",msg:r}),"function"==typeof e.searchFailFunc&&e.searchFailFunc.call(e.searchFailFunc,i))}})},t.prototype.showVerifyDialog=function(e,i){var r=this,n={img:e,vcode:i};c=a.ui.verify({title:"提示",hasError:r.hasError,onSure:function(e,i,a){r.vcode=e,r.input=i,r.isVerifyCode=a,r.searchUser(),c.hide()},onCancel:function(){"function"==typeof r.verifyCancelFunc&&r.verifyCancelFunc.call(r.verifyCancelFunc),r.flagFirst=!0,r.$shareDailog.show(),c.hide()},img:e,vcode:i},n),c.show(),"function"==typeof r.whenVerifyCodeDialog&&r.whenVerifyCodeDialog.call(r.whenVerifyCodeDialog),r.flagFirst=!1},r.exports=t});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/addFriendService.js",function(e,i,r){"use strict";var n,a=e("function-widget-1:shareDir/context.js").getContext(),c=e("base:widget/libs/jquerypacket.js"),o=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/getData.js"),t=function(e){this.member=e.member,this.verifyCancelFunc=e.verifyCancelFunc,this.whenVerifyCodeDialog=e.whenVerifyCodeDialog,this.addSuccFunc=e.addSuccFunc,this.flagFirst=!0,this.vcode=null,this.input=null,this.$shareDailog=c("#share")},l=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/errorMsg.js");t.ADD_FOLLOW="/mbox/relation/addfollow",t.prototype.addFollow=function(){var e=this,i={};i=null===e.vcode&&null===e.input?{uk:e.member.uk,type:"normal"}:{uk:e.member.uk,type:"normal",input:e.input,vcode:e.vcode},o({url:t.ADD_FOLLOW,data:i,succCallback:function(i){e.flagFirst=!0,"function"==typeof e.addSuccFunc?e.addSuccFunc.call(e.addSuccFunc,i):a.ui.tip({mode:"success",msg:"添加好友成功"})},failCallback:function(i){var r=i.errno,n=a.accountBan(i.errno);if(n.isBan)return!1;var c=l.ErrorMessage[i.errno]||"网络错误，请稍候重试",o=!0,t=!1;if(i&&-19===i.errno)e.showVerifyDialog(i.img,i.vcode);else{if(i){var r=i.errno;switch(r){case 2117:c="好友超出限制了";break;case 2118:c="已经是好友";break;case 2115:c="不能添加自己为好友";break;default:e.flagFirst||"function"!=typeof e.verifyCancelFunc||e.verifyCancelFunc.call(e.verifyCancelFunc)}}else e.flagFirst||"function"!=typeof e.verifyCancelFunc||e.verifyCancelFunc.call(e.verifyCancelFunc);a.ui.tip({mode:"caution",msg:c,autoClose:o,hasClose:t})}}})},t.prototype.showVerifyDialog=function(e,i){var r=this,c={img:e,vcode:i};n=a.ui.verify({title:"提示",hasError:this.flagFirst,onSure:function(e,i){r.input=i,r.vcode=e,r.addFollow(),n.hide()},onCancel:function(){"function"==typeof r.verifyCancelFunc&&r.verifyCancelFunc.call(r.verifyCancelFunc),r.flagFirst=!0,r.$shareDailog.show(),n.hide()}},c),n.show(),"function"==typeof r.whenVerifyCodeDialog&&r.whenVerifyCodeDialog.call(r.whenVerifyCodeDialog),r.flagFirst=!1},r.exports=t});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/searchFriend/searchResult.tpl.js",function(s,a,e){"use strict";var p=[];p.push('<!--<p class="search-init">搜索结果<span id="searchBack" class="search-back">返回</span></p>-->'),p.push('<div class="search-result-area global-clearfix">'),p.push("<%if(data.records.length === 0 || !data.records) {%>"),p.push('<p class="search-no-result">没有找到你搜索的用户，检查下输入的帐号吧</p>'),p.push("<%} else {%>"),p.push("<%var item = data.records.shift()%>"),p.push('<p class="info-row">'),p.push('<a class="search-avatar" href="javascript:;">'),p.push('<img src="<%-item.avatar_url%>" width="52" height="52">'),p.push("</a>"),p.push("</p>"),p.push('<p class="info-row">'),p.push("<label>昵称：</label>"),p.push("<%if (item.remark) {%>"),p.push("<span><%-item.remark%></span>"),p.push("<%} else if (item.nick_name){%>"),p.push("<span><%-item.nick_name%></span>"),p.push("<%} else if (item.uname){%>"),p.push("<span><%-item.uname%></span>"),p.push("<%}%>"),p.push("</p>"),p.push('<p class="info-row info-row-gray">'),p.push("<label>百度帐号：</label>"),p.push('<span"><%-item.uname%></span>'),p.push("<%if(item.uk == myUk){%>"),p.push("<span>(自己)</span>"),p.push("<%} else if(item.follow_flag == 1){%>"),p.push("<span>(已是好友)</span>"),p.push("<%}%>"),p.push("</p>"),p.push("<%if(item.uk == myUk){%>"),p.push("<%}else if(item.follow_flag == 1){%>"),p.push('<div class="search-btn-area">'),p.push('<a class="g-button g-button-blue search-friend-btn sbtn" node-type="search-receiver-btn"><span class="g-button-right" style="padding-right:75px;"><span class="text">共享给TA</span></span></a>'),p.push("</div>"),p.push("<%}else{%>"),p.push('<div class="search-btn-area">'),p.push('<a class="g-button g-button-blue search-add-btn sbtn" node-type="search-add-btn"><span class="g-button-right" style="padding-right:75px;"><span class="text">加为好友</span></span></a>'),p.push("</div>"),p.push("<%}%>"),p.push("<%}%>"),e.exports=p.join("\n")});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/errorMsg.js",function(a,e,r){var i={0:"成功","-1":"由于您分享了违反相关法律法规的文件，分享功能已被禁用，之前分享出去的文件不受影响。","-2":"用户不存在,请刷新页面后重试","-3":"文件不存在,请刷新页面后重试","-4":"登录信息有误，请重新登录试试","-5":"登录信息有误，请重新登录试试","-6":"请重新登录","-7":"该分享已删除或已取消","-8":"该分享已经过期","-9":"访问密码错误","-10":"分享外链已经达到最大上限100000条，不能再次分享","-11":"验证cookie无效","-14":"对不起，短信分享每天限制20条，你今天已经分享完，请明天再来分享吧！","-15":"对不起，邮件分享每天限制20封，你今天已经分享完，请明天再来分享吧！","-16":"对不起，该文件已经限制分享！","-17":"文件分享超过限制","-19":"验证码输入错误，请重试","-20":"请求验证码失败，请重试","-21":"未绑定手机或邮箱，没有权限私密分享","-22":"被分享的文件无法重命名，移动等操作","-30":"文件已存在","-31":"文件保存失败","-32":"你的空间不足了哟，赶紧购买空间吧","-33":"一次支持操作999个，减点试试吧","-40":"热门推荐失败","-60":"相关推荐数据异常","-62":"密码输入次数达到上限","-64":"描述包含敏感词","-70":"你分享的文件中包含病毒或疑似病毒，为了你和他人的数据安全，换个文件分享吧",1:"服务器错误",2:"参数错误",3:"未登录或帐号无效",4:"存储好像出问题了，请稍候再试",12:"批量处理错误",14:"网络错误，请稍候重试",15:"操作失败，请稍候重试",16:"网络错误，请稍候重试",105:"创建链接失败，请重试",106:'文件读取失败，请<a href="javascript:window.location.reload();">刷新</a>页面后重试',108:"文件名有敏感词，优化一下吧",110:"您今天分享太多了，24小时后再试吧",111:"外链转存失败，请稍候重试",112:'页面已过期，请<a href="javascript:window.location.reload();">刷新</a>后重试',113:"外链签名有误",114:"当前任务不存在，保存失败",115:"该文件禁止分享",116:"分享不存在",117:"分享已经过期",2126:"文件名中含有敏感词",2161:"文件中含有违规内容",2135:"对方拒绝接收消息",2136:"对方设置了屏蔽陌生人消息",2102:"群组不存在",2103:"你已退出该群",9100:'你的帐号存在违规行为，已被冻结，<a href="/disk/appeal">查看详情</a>',9200:'你的帐号存在违规行为，已被冻结，<a href="/disk/appeal">查看详情</a>',9300:'你的帐号存在违规行为，该功能暂被冻结，<a href="/disk/appeal">查看详情</a>',9400:'你的帐号异常，需验证后才能使用该功能，<a href="/disk/appeal">立即验证</a>',9500:'您的帐号存在安全风险，已进入保护模式，请修改密码后使用,<a href="/disk/appeal">查看详情</a>'};r.exports=i});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/createGroupService.js",function(e,r,i){"use strict";var a=e("function-widget-1:shareDir/context.js").getContext(),n=e("base:widget/libs/jquerypacket.js"),t=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/getData.js"),o=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/errorMsg.js"),c=function(e){this.data=e.data,this.verifyCancelFunc=e.verifyCancelFunc,this.whenVerifyCodeDialog=e.whenVerifyCodeDialog,this.addSuccFunc=e.addSuccFunc,this.addFailFunc=e.addFailFunc,this.hasError=!1,this.flagFirst=!0,this.vcode=null,this.input=null,this.$shareDailog=n("#share")};c.createGroupUrl="/mbox/group/create",c.prototype.createGroup=function(){var e=this,r={};r=null===e.vcode&&null===e.input?e.data:n.extend(e.data,{input:e.input,vcode:e.vcode}),t({url:c.createGroupUrl,data:r,succCallback:function(r){e.flagFirst=!0,"function"==typeof e.addSuccFunc?e.addSuccFunc.call(e.addSuccFunc,r):a.ui.tip({mode:"sucess",msg:"创建群组成功"})},failCallback:function(r){var i=r.errno,n=a.accountBan(i);if(n.isBan)return!1;var t=o[r.errno]||"网络错误，请稍候重试",c=!0,u=!1,i=r.errno;r&&-19===r.errno?(e.isVerifyCode&&(e.hasError=!0),"function"==typeof e.whenVerifyCodeDialog&&e.whenVerifyCodeDialog.call(e.whenVerifyCodeDialog,r)):"function"==typeof e.addFailFunc?e.addFailFunc.call(e.addFailFunc,r):(r&&2101===r.errno?t="你已达到创建2000群上限":r&&2100===r.errno?t="用户都已经被添加过":r&&2119===r.errno?t="群成员已满":r&&-60===r.errno?t="群成员超过上限":r&&-20===r.errno?t="获取验证码失败":r&&-73===r.errno&&(t="创建群个数超过上限"),a.ui.tip({mode:"caution",msg:t,autoClose:c,hasClose:u}))}})},i.exports=c});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareNameInput.js",function(e,t,a){var i=e("base:widget/libs/jquerypacket.js"),n=function(e,t){var a=this;a.delimiter=/[;,；，]/gi,a.el=e,a.tapType=t,a.el.empty(),a.el.append('<div id="nameCards" class="name-cards"></div><input id="inputText" class="input-text" type="text" value="请输入或选择百度用户名" />'),a.input=a.el.find("#inputText"),a.nameCards=a.el.find("#nameCards"),a.userCount=0,a.phoneCount=0,a.mailCount=0,a.lastLineTop=0,a.userList={},a.phoneList={},a.mailList={}};n.prototype={render:function(){var e=this;e.inputWidth=e.el.width()-20,e.input.css({width:e.inputWidth}).val(e.inputTips()),e.nameCards.bind("click",function(){e.input.focus(),e.el.addClass("focus")}),e.input.bind("keyup",function(t){if(59==t.which||186==t.which||188==t.which){var a=e.getNameList();if(a.length)for(var i=0,n=a.length;n>i;i++)a[i]&&e.addCard({id:"card-"+parseInt(Math.random()*Math.pow(10,10)+1),name:a[i]});e.input.val("")}}).bind("keydown",function(t){if(32==t.which||13==t.which){var a=e.getNameList();if(a.length)for(var n=0,s=a.length;s>n;n++)a[n]&&e.addCard({id:"card-"+parseInt(Math.random()*Math.pow(10,10)+1),name:a[n]})}return 8==t.which&&""==e.getNameList()[0]&&i(".share-name-item").length>0?(e.removeCard({elem:i(".share-name-item").last()}),!0):void 0}).bind("blur",function(){var t=e.getNameList();if(t.length)for(var a=0,n=t.length;n>a;a++)t[a]&&e.addCard({id:"card-"+parseInt(Math.random()*Math.pow(10,10)+1),name:t[a]});0==e.input.val().length&&0==i(".share-name-item").length?(e.input.val(e.inputTips()),e.input.css("color","#999")):e.input.val(""),e.el.removeClass("focus")}).bind("focus",function(){e.input.val()==e.inputTips()&&e.input.val(""),e.input.css("color","#333")}),e.el.bind("click",function(){e.input.val("").focus(),e.el.addClass("focus")}),e.el.off("click",".remove-name").on("click",".remove-name",function(){return e.removeCard({elem:i(this).closest(".share-name-item")}),!0})},getTapType:function(e){var t=this;t.tapType=e},getUser:function(e){var t=this;i.ajax({url:"/inbox/friend/queryuser",data:{query_uname:'{"'+e.name+'":0}'},type:"GET",context:e.id,dataType:"json",success:function(a){var n=i("#"+this.toString());0==a.errno?i.each(a.user_list,function(a,s){if(s.wangpan_user)if(t.userList[s.uk]){n.remove();var r=i('.share-name-item[uname="'+e.name+'（合作用户）"]');r.addClass("blue"),setTimeout(function(){r.removeClass("blue")},1e3)}else n.attr("uk",s.uk),t.userList[s.uk]={uk:s.uk,name:s.uname},t.userCount+=1,t.getUserList.call(t,t.userList,t.userCount);else n.addClass("red"),t.hintShow.call(t,"以下红色显示的不是网盘用户，检查一下吧")}):(n.addClass("red"),t.hintShow.call(t,"以下红色显示的不是网盘用户，检查一下吧"))},error:function(e){e.errno||console.log("error : "+e)}})},getNameList:function(){var e=this;return i.trim(e.input.val()).split(e.delimiter)},addCard:function(e,t){var a=this,n=!0,t=t||!1;if(e.name==a.inputTips())return a.input.val(""),!0;i(".share-name-item.red").length?a.hintShow.call(a,"以下红色显示的不是网盘用户，检查一下吧"):a.hintHide.call(a);var s=e.id?'id="'+e.id+'"':"",r=e.mail||e.phone?"("+(e.mail||e.phone)+")":"";card=i('<a class="share-name-item" '+s+' href="javascript:;" hidefocus="hideFocus" uname="'+e.name+'"><span class="name">'+e.name+r+'</span><span class="remove-name"></span></a>');var o=function(e){n=!1;var t="";switch(a.tapType){case"friend":t=i('.share-name-item[uname="'+e+'"]');break;case"phone":t=i('.share-name-item[phone="'+e+'"]');break;case"mail":t=i('.share-name-item[mail="'+e+'"]')}t.addClass("blue"),setTimeout(function(){t.removeClass("blue")},1e3)};if(disk.DEBUG&&console.log("t.userCount----------------"+a.userCount+"\n"),"friend"==a.tapType)if(a.userCount<5){if(!t)for(var u in a.userList)(a.userList[u].name==e.name||a.userList[u].uk==e.uk)&&o(e.name);n&&(a.nameCards.append(card),a.input.val("").focus(),e.uk?(a.userList[e.uk]=e,a.userCount+=1,card.attr("uk",e.uk),a.getUserList.call(a,a.userList,a.userCount)):a.getUser(e),a._reSize())}else a.userCount>=5&&a.hintShow.call(a,"最多只能选5个好友分享");else"phone"==a.tapType?a.phoneCount<5?(t||(a.phoneList[e.phone]||a.phoneList[e.name])&&o(e.phone||e.name),n&&(a.nameCards.append(card),a.input.val("").focus(),/^(\+86)?\s*0?1[3-8]\d[\s\-]?\d{4}[\s\-]?\d{4}$/.test(e.phone||e.name)?(a.phoneList[e.phone||e.name]=e,a.phoneCount+=1,card.attr("phone",e.phone||e.name),a.getUserList.call(a,a.phoneList,a.phoneCount)):(card.addClass("red"),a.hintShow.call(a,"以下红色显示的手机号不正确，检查一下吧")),a._reSize())):a.phoneCount>=5&&a.hintShow.call(a,"最多只能选5个手机用户"):"mail"==a.tapType&&(a.mailCount<5?(t||(a.mailList[e.mail]||a.mailList[e.name])&&o(e.mail||e.name),n&&(a.nameCards.append(card),a.input.val("").focus(),/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e.mail||e.name)?(a.mailList[e.mail||e.name]=e,a.mailCount+=1,card.attr("mail",e.mail||e.name),a.getUserList.call(a,a.mailList,a.mailCount)):(card.addClass("red"),a.hintShow.call(a,"以下红色显示的邮箱不正确，检查一下吧")),a._reSize())):a.mailCount>=5&&a.hintShow.call(a,"最多只能选5个邮箱用户"))},removeCard:function(e){var t=this;if("friend"==t.tapType){var a=e.uk||e.elem.attr("uk"),n=e.elem||i('.share-name-item[uk="'+e.uk+'"]');a&&(t.userList[a]&&(delete t.userList[a],t.userCount-=1),t.getUserList.call(t,t.userList,t.userCount))}else if("phone"==t.tapType){var s=e.phone||e.elem.attr("phone"),n=e.elem||i('.share-name-item[phone="'+e.phone+'"]');s&&(t.phoneList[s]&&(delete t.phoneList[s],t.phoneCount-=1),t.getUserList.call(t,t.phoneList,t.phoneCount))}else if("mail"==t.tapType){var r=e.mail||e.elem.attr("mail"),n=e.elem||i('.share-name-item[mail="'+e.mail+'"]');r&&(t.mailList[r]&&(delete t.mailList[r],t.mailCount-=1),t.getUserList.call(t,t.mailList,t.mailCount))}n.remove(),i(".share-name-item.red").length?t.hintShow.call(t,"以下红色显示的不是网盘用户，检查一下吧"):t.hintHide.call(t),t._reSize()},_getPosition:function(){if(!i(".share-name-item").length)return!1;var e=i(".share-name-item").last(),t=e.position();return{left:t.left,width:i(e).width()}},_reSize:function(){var e=this,t=e._getPosition();if(t){var a=t.left+t.width+12;a+50>e.inputWidth&&(a=3)}else var a=3;e.input.width(e.inputWidth-a);var i=e.input.position().top;i!=e.lastLineTop&&(e.lastLineTop=i,e.heightChange(i+28))},restore:function(){var e=this;e.nameCards.empty(),e.input.val(e.inputTips()),e.input.css("color","#999"),e.userCount=0,e.phoneCount=0,e.mailCount=0,e.userList={},e.phoneList={},e.mailList={},e._reSize()},inputTips:function(){var e=this,t="请输入百度帐号/邮箱添加好友";switch(e.tapType){case"friend":t="请输入百度帐号/邮箱添加好友";break;case"phone":t="请输入或选择手机号码";break;case"mail":t="请输入或选择邮件地址"}return t},changeTab:function(e){var t,a=this;switch(a.nameCards.empty(),a.tapType=e,a.userCount=0,a.phoneCount=0,a.mailCount=0,a.tapType){case"friend":t=a.userList,a.getUserList.call(a,a.userList,a.userCount);break;case"phone":t=a.phoneList,a.getUserList.call(a,a.phoneList,a.phoneCount);break;case"mail":t=a.mailList,a.getUserList.call(a,a.mailList,a.mailCount)}for(var i in t)a.addCard(t[i],!0);0===a.nameCards.children().length&&(a.input.val(a.inputTips()),a.input.css("color","#999")),a._reSize()},hintShow:function(){},hintHide:function(){},heightChange:function(){},delSign:function(){},addSign:function(){},getUserList:function(){}},n.prototype.constructor=n,a.exports=n});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/groupList.js",function(t,i,e){var s=t("base:widget/libs/jquerypacket.js"),n=t("base:widget/libs/underscore.js"),a=t("function-widget-1:shareDir/context.js").getContext(),o=function(t){this._list=null,this._showlastListDetail=!1,o.IdPrefix=this._IdPrefix=function(){for(var t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],i="",e=0;3>e;e++){var s=Math.ceil(25*Math.random());i+=t[s]}return"abc-"}(),this._tagsHash={},this.parseTitle=null,this.container=t.container,this.iShareSelectedList=t.iShareSelectedList,this.init()};o.TAG_RECENT="recent",o.TAG_GROUP="mboxOfGroup",o.TAG_FRIEND="mboxOfFriend",o.TIPS_NO_OVER_ONE_CATEGORY="无法同时选择群主和好友为收件人",o.containerList=[],o.prototype={init:function(){for(var t=this,i=0,e=o.containerList.length;e>i;i++)if(o.containerList[i]===t.container||o.containerList[i][0]===t.container[0])return;o.containerList.push(this.container),this.bindEvent()},bindEvent:function(){var t=this;this.container.delegate(".title","click",function(i,e){i.stopPropagation();{var n=s(this).parent("li");n.data("customtag")}if(0===s(this).find(".number").length&&1===s(this).next("ul").find("li").length&&!t._showlastListDetail){var a,o,r=n.data("groupid");a=t.findGroup(r),o=s(this).next("ul").find("li").text();for(var l,d=s(this);!l&&d.length;){if(d.data("customtag")&&""!==d.data("customtag")){l=d.data("customtag");break}d=d.parents("li")}return void t.onListSelected(a,o,l)}n.find("ul:first").is(":visible")?(disk.DEBUG&&console.log("[LOG FROM GROUPLIST] will send `BeforeGroupOpen` event, customTag: "+n.data("customtag")),t.onBeforeGroupClose(n.data("customtag"),n.find("ul:first>li").length,n.attr("id")),n.find("ul:first").hide().next(".load-more").hide(),n.addClass("on").removeClass("open")):(disk.DEBUG&&console.log("[LOG FROM GROUPLIST] will send `BeforeGroupClose` event, customTag: "+n.data("customtag")),t.onBeforeGroupOpen(n.data("customtag"),n.find("ul:first>li").length,n.attr("id")),e===!0?n.find("ul:first").hide():(n.find("ul:first").show(),n.removeClass("on").addClass("open")),n.find("ul:first>li").length&&n.find(".load-more:first").show())}),this.container.delegate(".load-more","click",function(){var i=s(this).parent();disk.DEBUG&&console.log("[LOG FROM GROUPLIST] will send `LoadMore` event, customTag: "+i.data("customtag")),t.onLoadMore(i.data("customtag"),i.find("ul:first>li").length,i.attr("id"))}),this.container.delegate("li","mouseenter",function(t){t.stopPropagation(),0!==s(this).find("ul:first").length&&s(this).find("ul:first").is(":visible")||s(this).addClass("on")}).delegate("li","mouseleave",function(t){t.stopPropagation(),s(this).removeClass("on")}),this.container.delegate("li","click",function(i){if(i.stopPropagation(),1===s(this).find("ul>li").length&&!t._showlastListDetail){var e,n,a,r=s(this).data("groupid");e=t.findGroup(r),n=s(this).find("ul>li").text();for(var l=s(this);!a&&l.length;)l.data("customtag")&&""!==l.data("customtag")?a=l.data("customtag"):l=l.parents("li");return void t.onListSelected(e,n,a)}if(0===s(this).find("ul").length){var e,n,a,r=s(this).data("groupid"),l=s(this),d=l.find(".label");for(void 0!=r?e=t.findGroup(r):(r=s(this).parents("li").data("groupid"),e=t.findGroup(r),n=s(this).text());!a&&l.length;)l.data("customtag")&&""!==l.data("customtag")?a=l.data("customtag"):l=l.parents("li");var u=s(this).data("is-group")===!0?o.TAG_GROUP:o.TAG_FRIEND;t._useTips(!1),s(this).hasClass("step-2")?(u=s(this).parents("li").data("customtag"),t.onListSelected(e,n,u)):d.hasClass("label-on")===!1?t.iShareSelectedList.isCheckSelectedItemOk(u)===!0&&(d.addClass("label-on"),t.iShareSelectedList.stepSelectedItem(e,!0)):(d.removeClass("label-on"),t.iShareSelectedList.stepSelectedItem(e,!1))}})},loopDealSelectedItem:function(t,i,e,s){var a=t.gid||t.uk,r=".tree-list>li[data-customtag="+o.TAG_RECENT+"],.tree-list>li[data-customtag="+i+"]",l=this.container.find(r).find("li[data-uniqueId="+a+"]"),d=this.findGroupId(o.TAG_FRIEND);if(e===!0){if(i===o.TAG_FRIEND&&0===l.length&&s===!1){var u=this._renderFriendItem(t);this.container.find(".tree-list>li[data-customtag="+o.TAG_FRIEND+"]").find("ul").prepend(u),this._pushFriend(t)}i===o.TAG_FRIEND&&s===!0&&(n.findWhere(this._list[parseInt(d)].list,{uk:t.uk})||this._pushFriendData(t)),l.find(".label").addClass("label-on")}else l.find(".label").removeClass("label-on")},_pushFriend:function(t){this._pushFriendData(t),this._updateFriendNum()},_pushFriendData:function(t){var i=this.findGroupId(o.TAG_FRIEND);this._list[parseInt(i)].list.push(t)},_updateFriendNum:function(){var t=this.findGroupId(o.TAG_FRIEND);s("#treeList-"+this._IdPrefix+t).find(".title .number").text("("+this._list[parseInt(t)].list.length+")")},_removeSelectedIcon:function(t){var i=t.find(".label");i.removeClass("label-on")},getFriendGroupId:function(){var t=this.findGroupId(o.TAG_FRIEND),i=t+","+this._list[parseInt(t)].list.length;return i},_renderFriendItem:function(t){var i=this.findGroupId(o.TAG_FRIEND),e=t.remark||t.priority_name||t.nick_name||t.uname||"未命名",s='<li id="treeList-'+this._IdPrefix+t.id+'" data-customtag="'+o.TAG_FRIEND+'" data-groupId="'+i+","+this._list[parseInt(i)].list.length+'" data-is-group="'+!1+'" data-uniqueId="'+t.uk+'" class="step-1"><div class="label label-on"></div><div class="uinfo" title="'+a.tools.baseService.encodeHTML(e)+'"><img src="'+a.tools.baseService.encodeHTML(t.avatar_url)+'" class="avatar">'+a.tools.baseService.encodeHTML(e)+"</div></li>";return s},_useTips:function(t,i){if("boolean"==typeof t)t?s(".tips",".share-dialog").show():s(".tips",".share-dialog").hide();else if(s(".tips",".share-dialog").show().find("span").html(t),"number"==typeof i){var e=".share-dialog";setTimeout(function(){s(".tips",e).hide()},i)}},_render:function(t,i,e,n,a){var r=this,l=this._tagsHash,d="string"==typeof n&&""!=n?n.split(",").length:0,u=d,h="",f=i?n:"";a="number"!=typeof a?0:a;var c=function(e,n,a){u="string"==typeof n&&""!=n?n.split(",").length:0,i&&d==u||(h+="<ul>"),s.each(e,function(i,e){if(u=""!=n?n.split(",").length:0,"string"==typeof e||"number"==typeof e)h+='<li class="step-'+u+'">'+e+"</li>";else if("object"==typeof e){if(e.id="string"==typeof n&&n.length>0?n+","+(i+a):""+(i+a),e.customTag&&(l[e.customTag]=e.id),"function"==typeof r.parseTitle&&r.parseTitle(e),0!==u){var s=!1;t===o.TAG_RECENT?e.gid&&(s=!0):t===o.TAG_GROUP&&(s=!0),h+='<li id="treeList-'+r._IdPrefix+e.id+'" data-customtag="'+(e.customTag?e.customTag:t)+'" data-groupId="'+e.id+'" data-is-group="'+(s?!0:!1)+'" data-uniqueId="'+(e.gid||e.uk)+'" class="step-'+u+'"'}else h+='<li id="treeList-'+r._IdPrefix+e.id+'" data-customtag="'+e.customTag+'" data-groupId="'+e.id+'" class="'+e.customTag+" step-"+u+'"';"[object Array]"===Object.prototype.toString.call(e.list)||"number"==typeof e.allNo?(e.open&&(h+=' style="display:block;"'),h+=">",h+='<div class="title"><em class="icon"></em>'+e.title,e.showNo&&(h+="我的邮箱联系人"===e.title||"我的手机联系人"===e.title?"undefined"==typeof e.allNo?'<span class="number g-hide js-total"></span>':'<span class="number g-hide js-total"></span>':"undefined"==typeof e.allNo?'<span class="number">('+(e.list?e.list.length:0)+")</span>":'<span class="number">('+e.allNo+")</span>"),h+="</div>",c(e.list||[],e.id,0),("undefined"==typeof e.list||e.list.length<e.allNo)&&(e.open&&!e.noMore?h+='<div class="load-more" style="display:block;">加载更多</div>':e.allNo&&!e.noMore&&(h+='<div class="load-more" style="display:none;">加载更多</div>'))):(h+=">",h+=e.title),h+="</li>"}}),i&&d==u||(h+="</ul>"),isFirst=!1};return c(i?e:this._list,f,a),h},updateList:function(t,i){if("string"!=typeof i){var e=this.findGroupId(i);if(""!==e&&"undefined"!=typeof e){var n=this.findGroup(e),a=n.list;return"[object Array]"===Object.prototype.toString.call(a)&&a.length>0?a=t:n.list=t,1===s("#treeList-"+this._IdPrefix+e+">ul").length?s("#treeList-"+this._IdPrefix+e+">ul").html(this._render(!0,t,e)):s("#treeList-"+this._IdPrefix+e).append("<ul>"+this._render(!0,t,e)+"</ul>"),void("number"==typeof n.allNo&&s("#treeList-"+this._IdPrefix+e+">ul>li").length<n.allNo?s("#treeList-"+this._IdPrefix+e+">.load-more").show():s("#treeList-"+this._IdPrefix+e+">.load-more").remove())}}"[object Array]"===Object.prototype.toString.call(t)&&t.length>0&&(this._list=t,this._tagsHash={},this.container.html(this._render()),s("ul:first",this.container).attr({id:"treeList-"+this._IdPrefix,"class":"tree-list"}),this.showFriendList())},showListDetail:function(){},showFriendList:function(){this.container.find(".title").eq(2).trigger("click",!0)},insertList:function(t,i){var e=this.findGroupId(i);if(e){var n=this.findGroup(e),a=n.list,o=0;"[object Array]"===Object.prototype.toString.call(a)&&a.length>0?(o=a.length,n.list=a.concat(t)):n.list=t,1===s("#treeList-"+this._IdPrefix+e+">ul").length?s("#treeList-"+this._IdPrefix+e+">ul").append(this._render(i,!0,t,e,o)):s("#treeList-"+this._IdPrefix+e).append("<ul>"+this._render(i,!0,t,e)+"</ul>"),"number"==typeof n.allNo&&s("#treeList-"+this._IdPrefix+e+">ul>li").length<n.allNo?s("#treeList-"+this._IdPrefix+e+">.load-more").show():s("#treeList-"+this._IdPrefix+e+">.load-more").remove()}else if(""==e||"undefined"==typeof e)if(this._list&&this._list.length>0){var o=this._list.length;this._list=this._list.concat(t),s("#treeList-"+this._IdPrefix).append(this._render("rim",!0,t,"",o))}else console.log("[WARN] the list is null, pls. use the updatelist function")},updateGroupNo:function(t,i){var e=this.findGroupId(t);e&&s("#treeList"+this._IdPrefix+e).find(".title:first .number").text("("+i+")")},findGroupId:function(t){var i;return this._tagsHash[t]?i=this._tagsHash[t]:"string"!=typeof t||1!==t.length&&-1==t.indexOf(",")||(i=t),i},findGroup:function(t){t+="";var i=t.split(","),e=this._list;return s.each(i,function(t,i){e=e.list?e.list[i]:e[i]}),e},openGroup:function(t){var i=this.findGroupId(t);i&&s("#treeList"+this._IdPrefix+i).addClass("open")},setSelected:function(){},onListSelected:function(){},onListCancelSelect:function(){},onLoadMore:function(){},onBeforeGroupOpen:function(){},onBeforeGroupClose:function(){}},e.exports=o});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareSelectedList.js",function(e,i,t){var s=e("base:widget/libs/underscore.js"),n=e("base:widget/libs/jquerypacket.js"),d=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/groupList.js"),s=e("base:widget/libs/underscore.js"),l=e("function-widget-1:shareDir/context.js").getContext(),a=function(e){this.$container=e&&e.$container,this.iFriendList=e&&e.friendList,this.iFriendShare=e&&e.iFriendShare,this.$el=n('<div class="selected-box"><p class="title" id="descTitle">已选择<span id="shareNum" class="share-num">0</span>个收件人<span id="defaultSelectedTip" style="display: none;">（默认创建群组）</span></p><ul class="select-list"><div class="none global-center"><span>你还没有选择好友</span></div></ul></div>'),this.$selectedList=this.$el.find(".select-list"),this.$shareNum=this.$el.find("#shareNum"),this.$defaultSelectedTip=this.$el.find("#defaultSelectedTip"),this.dSelectedList=null,this.init()};a.MAX_SELECTED_GROUP_NUM=1,a.MAX_SELECTED_FRIEND_NUM=49,a.singleton=null,a.obtain=function(){return null!==a.singleton?a.singleton:void 0},a.prototype={init:function(){this.$container.html(this.$el),this.setSingleton(),this.event()},setSingleton:function(){a.singleton=this},setIFriendList:function(e){this.iFriendList=e},setIFriendShare:function(e){this.iFriendShare=e},event:function(){var e=this;this.$container.delegate('div[node-type="labelBox"]',"click",function(){var i=n(this).closest("li.item"),t=i.data("groupid"),s=e.iFriendList.findGroup(t);e.stepSelectedItem(s,!1)})},stepSelectedItem:function(e,i,t){i===!0?this.addSelectedItem(e,t):this.removeSelectedItem(e),this.stepSelectedNum()},_getItemDom:function(){var e=function(e){var i,t=e.length>=4?4:e.length,s="";if(0===t)s+='<img src="/box-static/function-widget-1/share/util/img/_nomd5/default-avatar.png?t=1517818659974" width="27" height="27" />';else for(var n=0;t>n;n++)i=e[n],s+='<img src="'+l.tools.baseService.encodeHTML(i.photo)+'" class="img-'+(n+1)+'"/>';return'<div class="img-box img-box-'+t+' g-clearfix">'+s+"</div>"};return function(i){if(i.gid)return'<li data-uniqueid="'+(i.gid||i.uk)+'" data-groupid="'+i.id+'" class="item"><div class="label-box" node-type="labelBox"><div class="label label-dis"></div></div><div class="uinfo g-clearfix" title="'+l.tools.baseService.encodeHTML(i.name||i.dn||"未命名")+'">'+e(i.photoinfo)+'<span class="uname">'+l.tools.baseService.encodeHTML(i.name||i.dn||"未命名")+"</span></div></li>";var t=l.tools.baseService.encodeHTML(i.remark||i.priority_name||i.nick_name||i.uname||"未命名");return['<li data-uniqueid="'+(i.gid||i.uk)+'" data-groupid="'+i.id+'" class="item">','<div class="label-box" node-type="labelBox">','<div class="label label-dis"></div>',"</div>",'<div class="uinfo g-clearfix" title="'+t+'">','<img src="'+l.tools.baseService.encodeHTML(i.avatar_url)+'" width="23" height="23" class="avatar">','<span class="uname">'+t+"</span>","</div>","</li>"].join("")}}(),addSelectedItem:function(e,i){var t=e.gid?d.TAG_GROUP:d.TAG_FRIEND;this.$container.find(".none").is(":visible")===!0&&this.$container.find(".none").hide(),s.findWhere(this.dSelectedList,{uk:e.uk})||(this.dSelectedList=s.union(this.dSelectedList,[e]),this.$selectedList.append(this._getItemDom(e)),s.size(this.dSelectedList)>=2&&this._showDefaultTip(),this.iFriendList.loopDealSelectedItem(e,t,!0,i))},hasGroupData:function(){return void 0===s.pluck(this.dSelectedList,"gid")[0]?!1:!0},isCheckSelectedItemOk:function(e){var i=!0;return 0===this.dSelectedList.length?!0:(e===d.TAG_GROUP?this.hasGroupData()===!1?(this.iFriendShare.onNeedTips("无法同时选择群组和好友为收件人"),i=!1):this.dSelectedList.length>=a.MAX_SELECTED_GROUP_NUM&&(this.iFriendShare.onNeedTips("无法选择多个群组作为收件人"),i=!1):this.hasGroupData()===!0?(this.iFriendShare.onNeedTips("无法同时选择群组和好友为收件人"),i=!1):this.dSelectedList.length>=a.MAX_SELECTED_FRIEND_NUM&&(this.iFriendShare.onNeedTips("最多只能选择50个好友分享"),i=!1),i)},_checkSelectedNum:function(){this.dSelectedList.length>=50&&this.iFriendShare.onNeedTips("")},addReceiver:function(e){this.$selectedList.append(this._getItemDom(e))},removeSelectedItem:function(e){var i=e.gid?d.TAG_GROUP:d.TAG_FRIEND;this.iFriendShare.onNeedTips(!1),this.dSelectedList=s.difference(this.dSelectedList,[e]),s.size(this.dSelectedList)<2&&this._hideDefaultTip(),this.iFriendList.loopDealSelectedItem(e,i,!1),this.deleteSelectItemDom(e.gid||e.uk)},deleteSelectItemDom:function(e){this.$container.find("li[data-uniqueid="+e+"]").remove(),0===this.dSelectedList.length&&this.$selectedList.find(".none").show()},stepSelectedNum:function(){this._renderSelectedNum(this.dSelectedList.length)},_renderSelectedNum:function(e){this.$shareNum.text(e)},_clearSelectedList:function(){this.dSelectedList=[],this.$container.find(".select-list").html('<div class="none global-center"><span>你还没有选择好友</span></div>')},_showDefaultTip:function(){this.$defaultSelectedTip.show()},_hideDefaultTip:function(){this.$defaultSelectedTip.hide()},reset:function(){this._clearSelectedList(),this._renderSelectedNum(0)}},t.exports=a});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareFriendSearchNew.js",function(e,t,i){var a=e("base:widget/libs/jquerypacket.js"),r=e("base:widget/libs/underscore.js"),s=e("function-widget-1:shareDir/context.js").getContext(),n=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/searchFriend/searchResult.tpl.js"),c=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/addFriendService.js"),o=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/groupList.js"),h=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/searchUserService.js"),l=function(e){var t=this;t.tapType=e.tapType,t.searchBox=e.$resultBox,t.iShareSelectedList=e.iShareSelectedList,t.resultData=[],t.pimData=[],t.$container=e.$container,t.elBox=a('<div style="line-height:34px;text-align: right;"><a id="searchFriendLink" href="javascript:void(0);">添加好友</a></div>'),t.el=a('<div class="share-friend-search g-clearfix"><div id="searchSubmit" class="module-icon-box"><div class="module-icon module-icon-search"></div></div><input type="text" id="searchInput" class="input"><div id="searchPlaceholder" class="placeholder"><span>输入百度帐号/邮箱添加好友</span></div><div id="searchSuggest" class="suggest"></div></div>'),t.input=t.el.find("#searchInput"),t.placeholder=t.el.find("#searchPlaceholder"),t.suggest=t.el.find("#searchSuggest"),t.searchIcon=t.el.find("#searchSubmit"),t.searchResult=t.searchBox.find("#searchResultParent"),t._mSearchData=null,t.event(),t.initData()};l.SEARCH_RUL="/mbox/relation/query",l.prototype={getPimData:function(e){var t=this;t.pimData=e||[]},searchFriend:function(e){var t=this,i=a("#share");new h({query:{need_relation:1,user_list:a.stringify([e])},searchSuccFunc:function(e){i.show(),t.showSearchUser(e)},searchFailFunc:function(){t.restore()},verifyCancelFunc:function(){i.show()},whenVerifyCodeDialog:function(){i.hide()}}).searchUser()},showSearchUser:function(e){var t,i=this;0!==e.records.length&&(i._mSearchData=e.records[0]),t=s.tools.baseService.tmpl(n)({data:e,myUk:yunData.MYUK}),this.showSearchResult(t)},showSearchResult:function(e){this.searchResult.html(e),this.searchBox.show()},searchPhone:function(e,t){var i=this,a=[],r=[],s=[],n=[],c=i.pimData;if(/^\+?[\-\d]*$/.test(e)){e=e.replace(/[\$\(\)\*\+\.\[\]\?\{\}\-\^]/gi,function(e){return"\\"+e});for(var o=0,h=c.length;h>o;o++){var l=c[o].phone.join(","),d=c[o].dn;new RegExp("^"+e).test(d)?s.push(c[o]):new RegExp(e).test(d)?n.push(c[o]):new RegExp(t).test(d)?n.push(c[o]):new RegExp("(^|\\s)"+e).test(l)?a.push(c[o]):new RegExp(e).test(l)?r.push(c[o]):new RegExp(t).test(l)&&r.push(c[o])}i.resultData=s.concat(a,r,n)}else{e=e.replace(/[\$\(\)\*\+\.\[\]\?\{\}\\\|\-\<\>\/\^]/gi,function(e){return"\\"+e});for(var o=0,h=c.length;h>o;o++){var d=c[o].dn;new RegExp("^"+e,"i").test(d)?s.push(c[o]):new RegExp(e,"i").test(d)?n.push(c[o]):new RegExp(t,"i").test(d)&&n.push(c[o])}i.resultData=s.concat(n)}},searchMail:function(e,t){var i=this,a=[],r=[],s=[],n=[],c=i.pimData;if(/^\+?[\-\d]*$/.test(e)){e=e.replace(/[\$\(\)\*\+\.\[\]\?\{\}\-\^]/gi,function(e){return"\\"+e});for(var o=0,h=c.length;h>o;o++){var l=c[o].email.join(","),d=c[o].dn;new RegExp("^"+e).test(d)?s.push(c[o]):new RegExp(e).test(d)?n.push(c[o]):new RegExp(t).test(d)?n.push(c[o]):new RegExp("(^|\\s)"+e).test(l)?a.push(c[o]):new RegExp(e).test(l)?r.push(c[o]):new RegExp(t).test(l)&&(c[o].listOrder=o,r.push(c[o]))}i.resultData=s.concat(a,n,r)}else{e=e.replace(/[\$\(\)\*\+\.\[\]\?\{\}\\\|\-\<\>\/\^]/gi,function(e){return"\\"+e});for(var o=0,h=c.length;h>o;o++){var l=c[o].email.join(","),d=c[o].dn;new RegExp("^"+e,"i").test(d)?s.push(c[o]):new RegExp(e,"i").test(d)?n.push(c[o]):new RegExp(t,"i").test(d)?n.push(c[o]):new RegExp("(^|\\s)"+e,"i").test(l)?a.push(c[o]):new RegExp(e,"i").test(l)?r.push(c[o]):new RegExp(t,"i").test(l)&&r.push(c[o])}i.resultData=s.concat(a,n,r)}},clearFun:function(){var e=this;e.input.val(""),e.input.focus(),e.resultData=[],e.searchBox.hide()},restore:function(){var e=this;e.changeSearchIconStatus("toSearch"),e.input.val(""),e.placeholder.show(),e.resultData=[],e.searchBox.hide()},changeSearchIconStatus:function(e){var t=this.searchIcon.find(".module-icon");return"toSearch"===e?void t.removeClass("module-icon-clear").addClass("module-icon-search"):"toClear"===e?void t.removeClass("module-icon-search").addClass("module-icon-clear"):void(t.hasClass("module-icon-search")===!0?t.removeClass("module-icon-search").addClass("module-icon-clear"):t.removeClass("module-icon-clear").addClass("module-icon-search"))},submitFun:function(e){var t=this;if(e=e.trim().replace(/\s+/gi," "),""!==e){for(var i,a=e.split(""),r=0,s=a.length;s>r;r++)a[r]=a[r].replace(/[\$\(\)\*\+\.\[\]\?\{\}\\\|\-\<\>\/\^]/gi,function(e){return"\\"+e});switch(i=a.join(".*"),t.tapType){case"friend":t.searchFriend(e);break;case"phone":t.searchPhone(e,i);break;case"mail":t.searchMail(e,i)}}},_showSearchFriendLoading:function(){this.showSearchResult('<div class="loading">加载中...</div>')},addFollow:function(){var e=this,t={member:this._mSearchData,whenVerifyCodeDialog:function(){},addSuccFunc:function(){var t=e._mSearchData;s.ui.tip({mode:"success",msg:"添加好友成功"}),e.restore(),e.iShareSelectedList.isCheckSelectedItemOk(o.TAG_FRIEND)===!0&&(t.id=e.iShareSelectedList.iFriendList.getFriendGroupId(),e.iShareSelectedList.stepSelectedItem(t,!0,!1))}};new c(t).addFollow()},event:function(){var e=this;e.elBox.find("#searchFriendLink").bind("click",function(){e.$container.html(e.el),s.log.send({type:"share_friend_add_link"})}),e.placeholder.bind("click",function(){e.placeholder.hide(),e.input.focus()}),e.input.bind("blur",function(){a.trim(e.input.val())||(e.placeholder.show(),e.input.val(""))}).bind("keydown",function(t){if(13===t.keyCode){var i=e.input.val();return a.trim(i)?(e.changeSearchIconStatus("toClear"),e.submitFun.call(e,i),!1):void a(this).blur()}e.changeSearchIconStatus("toSearch")}).bind("focus",function(){e.placeholder.hide()}),e.searchIcon.bind("click",function(){var t,i=a(this).find(".module-icon");if(i.hasClass("module-icon-search")===!0){if(t=e.input.val(),!a.trim(t))return;e.changeSearchIconStatus("toClear"),e.submitFun.call(e,t),s.log.send({type:"share_friend_search_friend"})}else e.changeSearchIconStatus("toSearch"),e.clearFun()}),e.searchBox.delegate("#searchBack","click",function(){e.restore()}),e.searchBox.delegate('a[node-type="search-add-btn"]',"click",function(){e.addFollow(),s.log.send({type:"share_friend_add_friend"})}),e.searchBox.delegate('a[node-type="search-receiver-btn"]',"click",function(){var t;if(e.iShareSelectedList.iFriendList.onNeedTips(!1),e.iShareSelectedList.isCheckSelectedItemOk(o.TAG_FRIEND)===!0){t=e._mSearchData,e.restore();var i=e.iShareSelectedList.iFriendList,a=i.findGroupId(o.TAG_FRIEND),n=function(){var s=r.findWhere(i._list[parseInt(a,10)].list,{uk:t.uk});s?e.iShareSelectedList.stepSelectedItem(s,!0,!0):(t.id=e.iShareSelectedList.iFriendList.getFriendGroupId(),e.iShareSelectedList.stepSelectedItem(t,!0,!0))};i._list[parseInt(a,10)].list?n():e.iShareSelectedList.iFriendList.onBeforeGroupOpen(o.TAG_FRIEND,0,a,function(){n()})}s.log.send({type:"share_friend_add_receiver"})})},initData:function(){var e=this;switch(e.tapType){case"friend":e.placeholder.text("输入百度帐号/邮箱添加好友");break;case"phone":e.placeholder.text("查找手机联系人");break;case"mail":e.placeholder.text("查找邮箱联系人")}},changeTab:function(e){var t=this;t.tapType=e,t.initData(),t.restore()}},l.prototype.constructor=l,i.exports=l});
;define("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareFriend.js",function(e,i,t){var r=e("base:widget/libs/jquerypacket.js"),a=e("base:widget/libs/underscore.js"),n=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareFriendSearchNew.js"),s=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareSelectedList.js"),o=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/groupList.js"),c=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/shareNameInput.js"),l=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/service/userService/createGroupService.js"),d=e("function-widget-1:shareDir/context.js").getContext(),u=e("function-widget-1:shareDir/util/dialogControl/addMember/shareService/errorMsg.js"),f=function(e){var i=this;i.shareDialog=e&&e.shareDialog,i.container=e&&e.container,i.tapType=e&&e.tapType,i.fileslist=e&&e.fileslist,i.flag=e&&e.flag,i.recentEmailData=[],i.recentPhoneDataData=[]};f.operateMaxNum=500,f.sortByUname=function(){var e=function(e,i){var t=e.uname,r=i.uname;return t.localeCompare(r)};return function(i){i.sort(e)}}(),f.prototype={initFriendTabElement:function(){var e=this;e.el=r('<div id="sharefriendBox" class="share-friend-box"><p class="title"><span id="shareTitle">选择好友分享文件，一次最多50人</span></p><div class="content global-clearfix"><div class="left-side"><div id="contactBox" class="contact-box"><div id="friendBox" class="contact-group"></div><div id="phoneBox" class="contact-group"></div><div id="mailBox" class="contact-group"></div><div id="pimBox" class="pim-box"></div></div></div><div class="right-side"><div id="searchBox" class="search-box"></div><div id="selectedList"></div><!-- 搜索结果 --><div id="resultBox" class="result-box"><div id="searchResultParent" class="search-result-parent"></div></div></div></div></div>'),e.nameContent=e.el.find("#nameContent"),e.shareTitle=e.el.find("#shareTitle"),e.searchBox=e.el.find("#searchBox"),e.friendBox=e.el.find("#friendBox"),e.phoneBox=e.el.find("#phoneBox"),e.mailBox=e.el.find("#mailBox"),e.mBox=e.el.find("#mBox"),e.resultBox=e.el.find("#resultBox"),e.searchResult=e.el.find("#searchResultParent"),e.pimBox=e.el.find("#pimBox"),e.selectedList=e.el.find("#selectedList"),e.selectListData=[],e.descTitle=e.el.find("#descTitle"),e.desc=e.el.find("#desc"),e.descText="描述一下分享的文件吧",e.descSize=e.desc.prev("label"),e.phoneData={},e.mailData={},e.mboxRecordsOfRecent=[],e.mboxRecordsOfFriend=[],e.mboxRecordsOfGroup=[],e.tongji="",e.limit=50,e.start=0,e.ajaxUrl="/inbox/friend/getfriendlist",e.container.html(e.el),e._mShareSelectedList=new s({$container:e.selectedList}),e.friendList=new o({container:e.friendBox,iShareSelectedList:e._mShareSelectedList}),e._mShareSelectedList.setIFriendList(e.friendList),e._mShareSelectedList.setIFriendShare(e),e.friendList.onNeedTips=e.onNeedTips,e._mShareFriendSearch=new n({tapType:e.tapType,$container:e.searchBox,$resultBox:e.el.find("#resultBox"),iShareSelectedList:e._mShareSelectedList}),e.searchBox.html(e._mShareFriendSearch.elBox),e.phoneList=new o({container:e.phoneBox}),e.mailList=new o({container:e.mailBox}),e.mboxList=new o({container:e.mBox}),e.resultList=new o({container:e.searchResult}),e.phoneList.parseTitle=e.mailList.parseTitle=e.mailList.parseTitle=e.resultList.parseTitle=function(e){if("string"==typeof e.uname||"string"==typeof e.dn||"number"==typeof e.uname||"number"==typeof e.dn){var i=e.avatar_url||e.hurl||"/box-static/function-widget-1/share/util/img/_nomd5/default-avatar.png?t=1517818659974";e.title='<div class="label"></div><div class="uinfo" title="'+d.tools.baseService.encodeHTML(e.name||e.uname||e.dn||"未命名")+'"><img src="'+d.tools.baseService.encodeHTML(i)+'" class="avatar"/>'+d.tools.baseService.encodeHTML(e.name||e.uname||e.dn||"未命名")+"</div>"}(e.phone||e.email)&&(e.list=e.phone||e.email)},e.friendList.parseTitle=function(){var e=function(e){var i,t=e.length>=4?4:e.length,r="";if(0===t)r+='<img src="/box-static/function-widget-1/share/util/img/_nomd5/default-avatar.png?t=1517818659974" width="27" height="27" />';else for(var a=0;t>a;a++)i=e[a],r+='<img src="'+i.photo+'" class="img-'+(a+1)+'"/>';return'<div class="img-box img-box-'+t+' global-clearfix">'+r+"</div>"};return function(i){if(i.gid)i.title='<div class="label"></div><div class="uinfo" title="'+d.tools.baseService.encodeHTML(i.name||i.uname||i.dn||"未命名")+'">'+e(i.photoinfo)+d.tools.baseService.encodeHTML(i.name||i.dn||"未命名")+"</div>";else if("string"==typeof i.remark||"string"==typeof i.nick_name||"string"==typeof i.priority_name||"string"==typeof i.uname){var t=i.avatar_url||i.hurl||"/box-static/function-widget-1/share/util/img/_nomd5/default-avatar.png?t=1517818659974";i.title='<div class="label"></div><div class="uinfo" title="'+d.tools.baseService.encodeHTML(i.remark||i.priority_name||i.nick_name||i.uname||"未命名")+'"><img src="'+d.tools.baseService.encodeHTML(t)+'" class="avatar"/>'+d.tools.baseService.encodeHTML(i.remark||i.priority_name||i.nick_name||i.uname||"未命名")+"</div>"}}}()},initOtherTabElement:function(){var e=this;e.el=r('<div id="sharefriendBox" class="share-phone-mail-box"><div class="right-side"><div id="searchBox" class="search-box"></div><div id="contactBox" class="contact-box"><div id="mBox" class="contact-group"></div><div id="friendBox" class="contact-group"></div><div id="phoneBox" class="contact-group"></div><div id="mailBox" class="contact-group"></div><div id="resultBox" class="contact-group"><p class="search-init">搜索结果<span id="searchBack" class="search-back">返回</span></p><div id="searchResult" class="search-result"></div></div><div id="pimBox" class="pim-box"></div></div></div><div class="left-side"><p class="title"><span id="shareTitle">将文件发到好友的收件箱，一次最多5人</span>(<span id="shareNu" class="nu">0</span>)</p><div id="nameContent" class="name-content clearfix"></div><p class="title" id="descTitle">描述：</p><p class="desc-box"><label>0/500</label><textarea id="desc" class="desc" maxlength="500">描述一下分享的文件吧</textarea></p></div></div>'),e.nameContent=e.el.find("#nameContent"),e.shareTitle=e.el.find("#shareTitle"),e.shareNu=e.el.find("#shareNu"),e.searchBox=e.el.find("#searchBox"),e.friendBox=e.el.find("#friendBox"),e.phoneBox=e.el.find("#phoneBox"),e.mailBox=e.el.find("#mailBox"),e.mBox=e.el.find("#mBox"),e.resultBox=e.el.find("#resultBox"),e.searchResult=e.el.find("#searchResult"),e.pimBox=e.el.find("#pimBox"),e.descTitle=e.el.find("#descTitle"),e.desc=e.el.find("#desc"),e.descText="描述一下分享的文件吧",e.descSize=e.desc.prev("label"),e.phoneData={},e.mailData={},e.mboxRecords=[],e.tongji="",e.limit=50,e.start=0,e.ajaxUrl="/inbox/friend/getfriendlist",e._mShareNameInput=new c(e.nameContent,e.tapType),e.container.html(e.el),e.friendList=new o({container:e.friendBox}),e.phoneList=new o({container:e.phoneBox}),e.mailList=new o({container:e.mailBox}),e.mboxList=new o({container:e.mBox}),e.resultList=new o({container:e.searchResult}),e.friendList.parseTitle=e.phoneList.parseTitle=e.mailList.parseTitle=e.mailList.parseTitle=e.resultList.parseTitle=function(e){if("string"==typeof e.uname||"string"==typeof e.dn||"number"==typeof e.uname||"number"==typeof e.dn){var i=e.avatar_url||e.hurl||"/box-static/function-widget-1/share/util/img/_nomd5/default-avatar.png?t=1517818659974";e.title='<div class="uinfo" title="'+d.tools.baseService.encodeHTML(e.uname||e.dn||"未命名")+'"><img src="'+d.tools.baseService.encodeHTML(i)+'" class="avatar"/>'+d.tools.baseService.encodeHTML(e.uname||e.dn||"未命名")+"</div>"}(e.phone||e.email)&&(e.list=e.phone||e.email)}},updateFilesList:function(e){this.fileslist=e},showFriendList:function(){var e=function(e){e.html('<div class="loading">加载中...</div>')};return function(){var i=this,t=[];e(i.friendBox),i._ajaxMboxRecentList(function(){a.size(i.mboxRecordsOfRecent)>0&&t.push({title:"最近分享",showNo:!0,allNo:a.size(i.mboxRecordsOfRecent),customTag:"recent",noMore:!0}),i._ajaxMboxGroupList(function(){t.push({title:"群组",showNo:!0,allNo:i.mboxRecordsOfGroup.length,customTag:"mboxOfGroup",noMore:!0}),i._ajaxMboxFriendList(function(){t.push({title:"好友",showNo:!0,allNo:i.mboxRecordsOfFriend.length,customTag:"mboxOfFriend"}),i.friendList.updateList(t)})})})}}(),_showListDetail:function(){this.friendList.showListDetail()},_ajaxMboxFriendList:function(e){var i=this,t="/mbox/relation/getfollowlist";r.ajax({url:t,data:{start:this.start,limit:20},type:"GET",dataType:"json",success:function(t){0==t.errno?(i.mboxRecordsOfFriend=i.mboxRecordsOfFriend.concat(t.records),i.start=i.mboxRecordsOfFriend.length,1===t.has_more?i._ajaxMboxFriendList(e):(f.sortByUname(i.mboxRecordsOfFriend),i.start=0,e.call(i,i.mboxRecordsOfFriend))):(console.log("error : "+t.errno),e.call(null,!1))},error:function(i){e.call(null,!1),i.errno||console.log("error : "+i)}})},_ajaxMboxRecentList:function(e){var i=this;r.ajax({url:"/mbox/msg/historysession",type:"GET",dataType:"JSON",success:function(t){if(0==t.errno)t.records&&(i.mboxRecordsOfRecent=a.filter(t.records,function(e){return e.uk!=yunData.MYUK}),e.call(i,i.mboxRecordsOfGroup));else{var r="网络错误，请稍候重试";d.ui.tip({mode:"caution",msg:r})}},error:function(){var e="网络错误，请稍候重试";d.ui.tip({mode:"caution",msg:e})}})},_ajaxMboxGroupList:function(){var e=function(){var e="网络错误，请稍候重试";d.ui.tip({mode:"caution",msg:e})};return function(i){var t=this;r.ajax({url:"/mbox/group/list",data:{start:this.start,limit:20,type:0},type:"GET",dataType:"JSON",success:function(e){0==e.errno?(e.records&&(t.mboxRecordsOfGroup=t.mboxRecordsOfGroup.concat(e.records),t.start=t.mboxRecordsOfGroup.length),t.mboxRecordsOfGroup.length<e.count?t._ajaxMboxGroupList(i):(void 0===e.records||0===e.records.length||t.mboxRecordsOfGroup.length>=e.count)&&(t.start=0,i.call(t,t.mboxRecordsOfGroup))):console.log("error : "+e.errno)},error:function(i){i.errno||console.log("error : "+i),e()}})}}(),fetchFriend:function(e,i){var t=this,a={};return e===o.TAG_FRIEND?(t.friendList.insertList(t.mboxRecordsOfFriend,e),void("function"==typeof i&&i.apply())):e===o.TAG_GROUP?(t.friendList.insertList(t.mboxRecordsOfGroup,e),void("function"==typeof i&&i.apply())):e===o.TAG_RECENT?(t.friendList.insertList(t.mboxRecordsOfRecent,e),void("function"==typeof i&&i.apply())):(a.start=t.start,a.limit=t.limit,void r.ajax({url:t.ajaxUrl,data:a,type:"GET",dataType:"json",success:function(r){if(0==r.errno){var a=r.friend_list||r.follow_list||r.fans_list||r.records;f.sortByUname(a),t.friendList.insertList(a,e),"function"==typeof i&&i.apply()}else console.log("error : "+r.errno)},error:function(e){e.errno||console.log("error : "+e)}}))},getRecentPimData:function(e){var i=this,t=[];r.ajax({url:"/mbox/relation/getrecent",data:{start:i.start,limit:i.limit,type:e},type:"GET",dataType:"json",success:function(r){0==r.errno?(t.push({title:"最近分享",showNo:!0,allNo:r.count,customTag:"recentPim",noMore:!0}),1==e?i.mailList.updateList(t):i.phoneList.updateList(t),r.pim_data.length&&(1==e?i.mailList.insertList(r.pim_data,"recentPim"):i.phoneList.insertList(r.pim_data,"recentPim")),r.pim_data.length&&(1===e?i.recentEmailData=r.pim_data:i.recentPhoneData=r.pim_data)):console.log("error : "+r.errno)},error:function(e){e.errno||console.log("error : "+e)}})},_ajaxfetchPimData:function(e,i){var t=this,a=[];i=i||"",r.ajax({url:"/inbox/friend/getpimbycursor",data:{limit:1e3,type:e,cursor:i},type:"GET",dataType:"json",success:function(n){if(n&&0==n.errno)if(n.use_pim){if(a.push({title:1==e?"我的邮箱联系人":"我的手机联系人",showNo:!0,allNo:n.pim_count,customTag:"rim"}),""===i&&0!==n.list.length?(1==e?t.mailList.insertList(a):t.phoneList.insertList(a),t._ajaxfetchPimData.hasCacheTitle=!0):""!==i&&0!==n.list.length&&(t._ajaxfetchPimData.hasCacheTitle||(1==e?t.mailList.insertList(a):t.phoneList.insertList(a),t._ajaxfetchPimData.hasCacheTitle=!0)),0!==n.list.length?(1==e?t.mailData=n:t.phoneData=n,1==e?t.mailList.insertList(n.list,"rim"):t.phoneList.insertList(n.list,"rim"),t._ajaxfetchPimData.cacheTotal=t._ajaxfetchPimData.cacheTotal+n.list.length,t.pimBox.empty(),void 0!==n.cursor&&""!==n.cursor&&t._ajaxfetchPimData(e,n.cursor),t._ajaxfetchPimData.cacheList=t._ajaxfetchPimData.cacheList.concat(n.list)):0===n.list.length&&void 0!==n.cursor&&""!==n.cursor?(t.pimBox.empty(),t._ajaxfetchPimData(e,n.cursor)):0===t._ajaxfetchPimData.cacheList.length&&t.pimBox.html("您的通讯录没有联系人<br>登陆手机端备份后导入"),void 0===n.cursor){0!==t._ajaxfetchPimData.cacheList.length&&t._mShareFriendSearch.getPimData(t.recentEmailData.concat(t._ajaxfetchPimData.cacheList));var s=r(1==e?"#mailBox":"#phoneBox");s.find(".js-total").text("("+t._ajaxfetchPimData.cacheTotal+")").show()}}else t.pimBox.html('<span id="pimLink" class="pim-link">'+(1==e?"一键导入邮箱联系人":"一键导入手机联系人")+"</span>");else disk.DEBUG&&console.log("error : "+n.errno)},error:function(e){e.errno||console.log("error : "+e)}})},getPimData:function(e){{var i=this;1==e?i.mailData:i.phoneData}i._ajaxfetchPimData.hasCacheTitle=!1,i._ajaxfetchPimData.cacheTotal=0,i._ajaxfetchPimData.cacheList=[],i._ajaxfetchPimData(e)},getImportPimData:function(){var e=this;r.ajax({url:"/inbox/friend/importpim",type:"GET",dataType:"json",success:function(i){0==i.errno?e.getPimData("mail"==e.tapType?1:2):-10==i.errno?e.onNeedTips('联系人过多无法导入，去<a href="https://tongxunlu.baidu.com" target="_blank">通讯录</a>查看'):console.log("error : "+i.errno)},error:function(e){e.errno||console.log("error : "+e)}})},getDesc:function(){var e=this,i=r.trim(e.desc.val());return"phone"!=e.tapType&&(e.descText=i,""==i?(e.desc.val("描述一下分享的文件吧"),e.desc.css("color","#999"),e.descText="描述一下分享的文件吧"):"描述一下分享的文件吧"==i&&(e.desc.val(""),i="")),i},onNeedTips:function(){},event:function(){var e=this;e.desc.bind("blur",function(){e.getDesc()}).bind("focus",function(){"phone"!=e.tapType&&e.desc.val(e.descText),"描述一下分享的文件吧"==e.desc.val()&&e.desc.val(""),e.desc.css("color","#333")}).bind("keyup",function(){var i=e.desc.val().length;e.descSize.text(i+"/500"),i>500&&e.onNeedTips("描述不能超过500个字符")}),r("#searchBack").off("click").on("click",function(){e._mShareFriendSearch.restore(),e.initDataAndRender(),e.event(),e._mShareNameInput&&e._mShareNameInput.render()}),e.mBox.off("click","#pimLink").on("click","#pimLink",function(){e.getImportPimData()}),this.container.delegate("li.item","hover",function(){r(this).toggleClass("on")});var i=function(i){e.ajaxUrl="friend"==i?"/inbox/friend/getfriendlist":"follow"==i?"/inbox/friend/getfollowlist":"fans"==i?"/inbox/friend/getfanslist":"mboxOfFriend"==i?"/mbox/relation/getfollowlist":"mboxOfGroup"==i?"/mbox/group/list":"mbox/msg/historysession"};e.friendList.onBeforeGroupOpen=function(t,r,a,n){0==r&&(i(t),e.start=r,e.fetchFriend(t,n))},e.friendList.onLoadMore=function(t,r){i(t),e.start=r,e.fetchFriend(t)},"friend"!==e.tapType&&(e.mailList.onListSelected=e.phoneList.onListSelected=e.resultList.onListSelected=function(i,t,r){if(parseInt(e.shareNu.text())<5){var a={};switch(e.tapType){case"friend":a={uk:i.uk,name:i.uname};break;case"phone":a={phone:t||i.phone[0],name:i.dn,guid:i.guid},e.tongji=r+"Phone";break;case"mail":a={mail:t||i.email[0],name:i.dn,guid:i.guid},e.tongji=r+"Mail"}e._mShareNameInput.addCard(a)}else e.onNeedTips("最多只能选5个好友分享")},e._mShareNameInput.hintShow=function(i){e.onNeedTips(i)},e._mShareNameInput.heightChange=function(i){var t=28===i?68:45;e.desc.height(t)},e._mShareNameInput.hintHide=function(){},e._mShareNameInput.delSign=function(){},e._mShareNameInput.addSign=function(){},e._mShareNameInput.getUserList=function(i,t){e.userData=i,5>=t&&(e.nameContent[0]&&e.nameContent.scrollTop(e.nameContent[0].scrollHeight),e.shareNu.text(t))})},closePanel:function(){var e=this;e.userData={},e._mShareSelectedList&&e._mShareSelectedList.reset(),e.desc.val("描述一下分享的文件吧"),e.descText="描述一下分享的文件吧",e.desc.css("color","#999"),e.start=0,e.isAction=!0},_setDialogVisible:function(e){var i=this;e===!0?i.shareDialog.show():i.shareDialog.hide()},shareDataToFriendOrGroup:function(){var e="/mbox/msg/send",i=3,t=4,n=1,s=function(e){var i,t,r=[];for(i=0,t=e.length;t>i;i++)r.push(e[i].fs_id);return r},o=function(e){return a.pluck(e,"gid")},c=function(e){return a.pluck(e,"uk")},h=function(e){return a.pluck(e,"uname")},m=function(e){var i="分享失败，重试一下吧";return i=2135==e.errno?"对方拒绝接收消息":2102==e.errno?"群组不存在":2103==e.errno?"你已退出该群":u[e.errno]},p=function(e){if("BDYGJ"===e)return!0;var i="邀请已发出，请等待对方加入";d.ui.tip({mode:"success",msg:i})};return function(a){var g,v,x=this,T=x._mShareSelectedList.dSelectedList,b=x.fileslist;if(0===b.length)return void x.onNeedTips("您还没有选择文件");if(b.length>f.operateMaxNum)return void x.onNeedTips("您选择的文件不能超过"+f.operateMaxNum+"个");if(0===T.length)return void x.onNeedTips("您还没有选择好友或群");if(g={msg_type:n,msg:a.mboxMsg,fs_ids:r.stringify(s(b))},a.input&&a.vcode&&(g.vcode=a.vcode,g.input=a.input),this._mShareSelectedList.hasGroupData()===!0)g.send_type=t,g.receiver=r.stringify(o(T)),"BDYGJ"===x.flag&&BDHScript.throwEvent("shareStart",{gid:g.receiver}),r.ajax({url:e,data:g,type:"GET",dataType:"JSON",success:function(e){if(d.ui.hideTip(),"BDYGJ"===x.flag&&BDHScript.throwEvent("shareEnd",{gid:g.receiver,errno:e.errno,msg_id:e.msg_id}),0===e.errno)x.closePanel(),a.closeFun(),p(x.flag);else{var i=e.errno,t=d.accountBan(i);t.isBan&&(d.ui.hideTip(),e.errno=t.errno),-74===e.errno||-19===e.errno?a.paramTips(e):(x._setDialogVisible(!0),x.onNeedTips(m(e)))}},error:function(){d.ui.tip({mode:"caution",msg:"邀请失败，请稍后重试"})}});else if(T.length>=2){g.send_type=t;var _={user_list:r.stringify(c(T))};a.vcode&&a.input&&(_=r.extend({},_,{input:a.input,vcode:a.vcode})),v=new l({data:_,whenVerifyCodeDialog:function(e){a.paramTips(e)},addSuccFunc:function(i){g.receiver=r.stringify([i.gid]),d.ui.tip({mode:"loading",msg:"正在邀请好友，请稍候...",autoClose:!1}),"BDYGJ"===x.flag&&BDHScript.throwEvent("shareStart",{gid:g.receiver}),r.ajax({url:e,data:g,type:"GET",dataType:"JSON",success:function(e){if(d.ui.hideTip(),"BDYGJ"===x.flag&&BDHScript.throwEvent("shareEnd",{gid:g.receiver,errno:e.errno,msg_id:e.msg_id}),0===e.errno)x.closePanel(),a.closeFun(),p(x.flag);else if(-74==e.errno||-19==e.errno)a.paramTips(e);else{var i=d.accountBan(e.errno);i.isBan&&(d.ui.hideTip(),e.errno=i.errno),x._setDialogVisible(!0),x.onNeedTips(m(e))}},error:function(){d.ui.tip({mode:"caution",msg:"邀请失败，请稍后重试"})}})},addFailFunc:function(e){var i=e.errno,t=d.accountBan(i);if(t.isBan)return!1;var a=u[e.errno]||"网络错误，请稍候重试",n=!0,s=!1;if(e&&2101===e.errno)a="你已达到创建2000群上限";else if(e&&2100===e.errno)a="用户都已经被添加过";else if(e&&2119===e.errno)a="群成员已满";else{if(e&&-60===e.errno)return a="群成员超过上限",d.ui.tip({mode:"caution",msg:a}),r("#share").is(":visible")===!1&&x.shareDialog.show(),!0;e&&-20===e.errno?a="获取验证码失败":e&&-73===e.errno&&(a="创建群个数超过上限")}d.ui.tip({mode:"caution",msg:a,autoClose:n,hasClose:s})}}),v.createGroup()}else g.send_type=i,g.receiver=r.stringify(c(T)),g.receiver_name=r.stringify(h(T)),"BDYGJ"===x.flag&&BDHScript.throwEvent("shareStart",{ukList:g.receiver}),r.ajax({url:e,data:g,type:"GET",dataType:"JSON",success:function(e){if("BDYGJ"===x.flag&&BDHScript.throwEvent("shareEnd",{ukList:g.receiver,errno:e.errno,msg_id:e.msg_id}),0===e.errno)x.closePanel(),a.closeFun(),p(x.flag);else if(-74===e.errno||-19==e.errno)a.paramTips(e);else{var i=d.accountBan(e.errno);i.isBan&&(d.ui.hideTip(),e.errno=i.errno),x.onNeedTips(m(e))}},error:function(){d.ui.tip({mode:"caution",msg:"邀请失败，请稍后重试"})}})}}(),sending:function(){if(this.sendingStatus)return!0;var e=this;return this.sendingStatus=!0,setTimeout(function(){e.sendingStatus=!1},3e3),!1},clearSending:function(){this.sendingStatus=!1},shareData:function(e){if(!this.sending()){var i=this,t=[],a=[],n=0,s={},o=d.log;if("friend"===i.tapType)return void this.shareDataToFriendOrGroup(e);for(var c=0,l=i.fileslist.length;l>c;c++)a.push(i.fileslist[c].fs_id);for(var c in i.userData)switch(i.tapType){case"friend":n=0,t.push(i.userData[c].uk);break;case"phone":n=2,s[i.userData[c].phone||i.userData[c].name]=i.userData[c].guid||"",t.push(i.userData[c].phone||i.userData[c].name);break;case"mail":n=1,s[i.userData[c].mail||i.userData[c].name]=i.userData[c].guid||"",t.push(i.userData[c].mail||i.userData[c].name)}if(!t.length)return void i.onNeedTips("您还没有选择好友");if(!a.length)return void i.onNeedTips("您还没有选择文件");if(a.length>100)return void i.onNeedTips("您选择的文件不能超过100个");var u={receiver:r.stringify(t),fs_ids:r.stringify(a),send_type:1,msg_type:2};e.vcode&&e.input&&(u.input=e.input,u.vcode=e.vcode),r.ajax({url:"/mbox/msg/send?web=1",data:u,type:"POST",dataType:"JSON",success:function(t){0==t.errno?i._doShareSuccess(e):i._doShareFail(e,t),i.clearSending()},error:function(e){e.errno||console.log("error : "+e),d.ui.tip({mode:"caution",msg:"分享失败，请稍后重试"}),i.clearSending()}}),"rimPhone"==i.tongji?(o.send({type:"sharePhone",val:"手机联系人"}),i.tongji=""):"rimMail"==i.tongji&&(o.send({type:"shareMail",val:"邮箱联系人"}),i.tongji="")}},_doShareSuccess:function(e){var i=this;i.closePanel(),e.closeFun();var t="";"mail"===i.tapType?t="分享成功":"phone"===i.tapType?t='分享成功，你可以在<a href="/share/manage#tabtype=phone">我的分享</a>中查看分享详情':"friend"===i.tapType&&(t='分享成功，你可以在<a href="/mbox/homepage#share/type=session">分享</a>中查看分享详情'),d.ui.tip({mode:"success",msg:t})},_doShareFail:function(e,i){var t="分享失败，重试一下吧",r=this;if(-52==i.errno)t="发送的文件名中有敏感词，优化一下吧";else if(-60==i.errno)t="最多只能选5个好友分享";else if(-61==i.errno)t="你分享的文件数太多了，分批分享吧";else if(-62==i.errno){var a=i.fail_user.length?i.fail_user.length>1?i.fail_user[0].uname+"等":i.fail_user[0].uname:"一部分收件人";t=a+"的网盘用户校验失败"}else if(-63==i.errno)t="服务器出错分享失败，重试一下吧";else if(-64==i.errno)t="服务器出错分享失败，重试一下吧";else if(-72==i.errno)t="文件不存在，请重新选择文件分享";else if(-73==i.errno)t="您发送相同文件给相同人频率太快，请等一分钟后发送";else if(-75==i.errno)t="你今天分享次数太多了，明天再来分享吧";else if(-76==i.errno)t="你今天分享次数太多了，明天再来分享吧";else if(-78==i.errno)t="描述中有敏感词，优化一下吧";else if(-79==i.errno)t="描述不能超过500个字符";else if(-80==i.errno){var a=i.freq_front.length?i.freq_front.length>1?i.freq_front[0].uname+"等":i.freq_front[0].uname:"一部分收件人";t="给"+a+"分享次数太多了，明天再来分享吧"}else if(-81==i.errno)t='绑定手机号码即可以一次分享给多个用户。 <a href="//passport.baidu.com/v2/accountsecurity?act=bindmobile" target="_blank">去绑定手机号</a>';else if(-74==i.errno||-19==i.errno)e.paramTips(i);else if(-88==i.errno)t="分享内有敏感词，优化一下吧";else{var n=d.accountBan(i.errno);n.isBan&&(d.ui.hideTip(),i.errno=n.errno),t=u[i.errno]||"网络错误，请稍候重试"}-74!=i.errno&&-19!=i.errno&&r.onNeedTips(t)},initDataAndRender:function(){var e=this;switch(r(".contact-group").hide(),e.pimBox&&e.pimBox.empty(),e.desc&&e.desc.val(e.descText),e.tapType){case"friend":e.initFriendTabElement(),e._mShareSelectedList.reset(),e.desc.attr("readOnly",!1),e.descSize.show(),e.friendBox.show(),e.showFriendList();break;case"phone":e.shareTitle.text("将文件的下载地址免费发到好友手机，一次最多5人"),e.descTitle.text("短信内容："),e.desc.attr("readOnly",!0);var i=yunData.MYNAME+" 给你分享了文件："+location.protocol+"//pan.baidu.com/inbox....，有效时间：7天。【百度网盘】";e.desc.val(i),e.descSize.hide(),e.phoneBox.show(),e.getRecentPimData(2);break;case"mail":e.initOtherTabElement(),e.shareTitle.text("将文件的下载地址发到好友的邮箱，一次最多5人"),e.descTitle.text("邮件内容："),e.desc.attr("readOnly",!1),e.descSize.show(),e.mailBox.show(),e.getRecentPimData(1)}},render:function(){var e=this;e.initDataAndRender(),e.event(),e._mShareNameInput&&e._mShareNameInput.render()},changeTab:function(e){var i=this;i.tapType=e,i.render(),i._mShareNameInput&&i._mShareNameInput.changeTab(e),i._mShareFriendSearch&&i._mShareFriendSearch.changeTab(e)}},f.prototype.constructor=f,t.exports=f});
;define("function-widget-1:share/util/shareFriend/createSnsShare.js",function(e,i,s){function t(e){this.container=e&&e.container,this.getPublicInfo=e&&e.onNeedPublicInfo,this.fileslist=e&&e.fileslist,this.sendStatus=!1,this.publicInfo=null,this.publicLink=void 0,this.publicShareid=void 0,this.cover=null,this.init(),this.disabledShare=!1,this.shareError=0}var a=e("base:widget/libs/jquerypacket.js"),n=e("function-widget-1:share/util/errorMsg.js"),r=e("base:widget/storage/storage.js"),c=e("function-widget-1:share/context.js").getContext;t.prototype={sendAwardTaskRequest:function(e){var i={share_sina:10,upload:6};if(yunData.TASKKEY&&yunData.TASKTIME)return"undefined"==typeof r||r.getItem(e+"_"+FileUtils.sysUID.replace(/@/g,""))?!1:void a.ajax({type:"POST",timeout:3e3,url:"/api/task/create",dataType:"json",data:{type:i[e],sign:yunData.TASKKEY,timestamp:yunData.TASKTIME},success:function(s){!s||0!=s.errno&&-36!=s.errno&&-29!=s.errno||(disk.DEBUG&&console.log("..........type="+e+"data.errno"+s.errno),r.setItem(e+"_"+FileUtils.sysUID.replace(/@/g,""),i[e]))}})},createScript:function(){return script=document.createElement("script"),script.type="text/javascript",document.body.appendChild(script),script},init:function(){var e=this,i=this.createScript();i.id="bdshare_js",i.setAttribute("data","type=tools");var s=this.createScript();s.id="bdshell_js",this.render(),s.src="http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion="+Math.ceil(new Date/36e5),this.cover.bind("click",function(){if(e.disabledShare){var i=n[e.shareError];return e.onNeedTips(i),!1}e.onNeedTips("初始化组件中，请稍后",3e3)}),a("#bdshare a").mousedown(function(i){if("{}"===a("#bdshare").attr("data"))return e.onNeedTips("初始化组件中，请稍后···",3e3),i.stopPropagation(),!1;e.cover.hide(),e.onNeedTips(!1),a.get("/share/chgpublicchannel?",{shareid:e.publicLink,public_channel:a(this).attr("_index"),t:(new Date).getTime()}),e.sendStatus=!0;var s={type:"share_to_sns"};switch(a(this).attr("_index")){case"0":e.sendAwardTaskRequest("share_sina"),s.sns="tsina";break;case"1":s.sns="qzone";break;case"2":s.sns="tqq";break;case"3":s.sns="renren";break;case"4":s.sns="t163"}c().log.send(s)}),this.getPublicInfo&&(this.onNeedPublicInfo=this.getPublicInfo),this.fileslist&&this.updateFilesList(this.fileslist)},render:function(){var e='<div id="bdshare" class="bdshare_t bds_tools get-codes-bdshare" data="{}"><span class="bd_shares share_title">将文件的公开下载地址分享到微博、QQ空间等</span><a class="bds_tsina bd_shares" _index="0"  href="javascript:void(0);"><em class="icon"></em>新浪微博</a><a class="bds_qzone bd_shares" _index="1" href="javascript:void(0);"><em class="icon"></em>QQ空间</a><a class="bds_tqq bd_shares" _index="2" href="javascript:void(0);"><em class="icon"></em>腾讯微博</a><a class="bds_renren bd_shares" _index="3" href="javascript:void(0);"><em class="icon"></em>人人网</a><a class="bds_t163 bd_shares" _index="4" href="javascript:void(0);"><em class="icon"></em>网易微博</a></div><div class="cover"></div>';this.container.html(e),this.cover=this.container.find(".cover")},createPublicShare:function(e){if(this.publicInfo=this.onNeedPublicInfo(),this.publicInfo||"undefined"!=typeof this.publicShareid)this.publicInfo?(this.publicLink=this.publicInfo.link,this.publicShareid=this.publicInfo.shareid,e()):"undefined"!=typeof this.publicShareid&&e();else{var i=this,s={fid_list:[],schannel:0,channel_list:"[]"};if(a.each(i.fileslist,function(e,i){null!==i.fs_id&&"undefined"!=typeof i.fs_id&&s.fid_list.push(i.fs_id)}),s.fid_list.length<=0)return setTimeout(function(){var e="分享的文件不存在，请刷新页面重试";i.onNeedTips(e),c().ui.hideTip()},50),!1;s.fid_list=a.stringify(s.fid_list),a.post("/share/set?channel=chunlei&clienttype=0&web=1",s,function(s){if(0===s.errno)i.publicLink=s.shorturl||s.link,i.publicShareid=s.shareid,e();else{var t=c().accountBan(s.errno);t.isBan&&(c().ui.hideTip(),s.errno=t.errno,i.disabledShare=!0,i.shareError=s.errno);var a=n[s.errno]||"创建分享失败，请稍后再试";i.onNeedTips(a)}}).error(function(){i.onNeedTips("创建分享失败，请稍后再试")})}},cancelPublicShare:function(){if(!this.publicInfo&&this.publicShareid){var e=this,i="["+this.publicShareid+"]";a.post("/share/cancel?channel=chunlei&clienttype=0&web=1",{shareid_list:i},function(){}).error(function(){disk.DEBUG&&console.log("[LOG] cancel public share failure when skip the sns share")}),e.publicShareid=void 0}},updateFilesList:function(e){var i=this;this.sendStatus=!1,this.fileslist=e,this.publicInfo=null,this.selfLink=void 0,this.cover.show(),this.createPublicShare(function(){a("#bdshare").attr("data","{}"),i.initShareData()})},initShareData:function(){var e,i=this.fileslist,s=c().tools.baseService,t=this,n=[],r=[],h=i.length,o="";for(e=0;h>e;e++)r.push(i[e].fs_id);for(e in i){if(1>=e&&n.push(s.parseDirFromPath(s.getNormalizedPath(i[e].path))),e>1&&""!==o)break;var d=i[e];""===o&&3===d.category&&(o=d.thumbs.url3),""!==o||4!==d.category||d.path.match(/\.txt$/)||(o=d.docpreview+"&method=view&type=jpg")}n=n.join("”，“"),n.length>80&&n.substring(0,80),n="“"+n+"”",i.length>2?n=n+"等"+i.length+"个文件（夹）":n+="文件",n="Hi，我正在使用#百度网盘#，给大家分享"+n+"，快来看看吧~";var l={text:n,comment:n,pic:o,searchPic:0,url:t.publicLink};a("#bdshare").attr("data",a.stringify(l)),this.cover.hide()},closePanel:function(){!this.sendStatus&&this.publicShareid?this.cancelPublicShare():this.publicShareid=void 0},onNeedPublicInfo:function(){return void 0}},s.exports=t});
;define("function-widget-1:share/util/shareFriend/createLinkShare.js",function(e,i,t){function s(e){this.container=e&&e.container,this.publicInfo=null,this.status=s.STATUS_CREATE_PRIVATE,this.validity=s.VALIDITY_INITIALIZE,this.validityText=s.VALIDITY_TEXT_INITIALIZE,this.fileslist=e&&e.fileslist||null,this.myClipboard=null,this.clipboardText="",this.init()}var a=e("base:widget/libs/jquerypacket.js"),n=e("function-widget-1:share/util/errorMsg.js"),o=e("function-widget-1:share/context.js").getContext,r=e("base:widget/clipboard/myClipboard.js"),l=window.yunData;s.STATUS_INITIALIZE=0,s.STATUS_CREATE_PULICE=1,s.STATUS_CREATE_PRIVATE=2,s.VALIDITY_INITIALIZE=0,s.VALIDITY_TEXT_INITIALIZE="永久有效",s.prototype={init:function(){var e=this;this.render(),this.bindEvent(),a(".dialog-share .create").click(function(){"public"===e.container.find('.share-method-line input[type="radio"]:checked').val()?(e.status=s.STATUS_CREATE_PULICE,e.createShareLink(function(){e.container.find(".create-link").attr("class","create-link public-link has-create"),a(".dialog-share .create").hide(),a(".dialog-share .close .text").text("关闭"),a("#copyShare").next(".copy-tips").hide(),a(".share-validity-tip").css("right","115px"),a(".open-share-warning").hide(),o().log.send({name:"create_public_success",value:"创建公开链接成功",sendServerLog:!0})}),o().log.send({name:"create_public",value:"创建公开链接",sendServerLog:!0})):(e.status=s.STATUS_CREATE_PRIVATE,e.createShareLink(function(){e.container.find(".create-link").attr("class","create-link private-link has-create"),a(".dialog-share .create").hide(),a(".dialog-share .close .text").text("关闭"),a("#copyShare").next(".copy-tips").hide(),a(".share-validity-tip").css("right","150px"),a(".open-share-warning").hide(),o().log.send({name:"create_private_success",value:"创建私密链接成功",sendServerLog:!0})}),o().log.send({name:"create_private",value:"创建私密链接",sendServerLog:!0}))}),e.container.delegate(".copy-button","click",function(){e.myClipboard.setText(e.clipboardText)}).delegate(".copy-button","mouseenter",function(){a(this).addClass("button-hover")}).delegate(".copy-button","mouseleave",function(){a(this).removeClass("button-hover")}).delegate(".copy-button","mousedown",function(){a(this).addClass("button-active")}).delegate(".copy-button","mouseup",function(){a(this).removeClass("button-active")}).delegate(".share-url","mouseover",function(){a(this).select()})},render:function(){var e=' <div class="create-link"> <table class="validity-section"><tr><td class="first-child"><label>分享形式</label></td><td><div class="share-method-line"><input type="radio" id="share-method-private" name="share-method" value="private" checked=true /><span class="icon icon-radio-checked radio-icon"></span><label for="share-method-private"><b>加密</b><span>仅限拥有密码者可查看，更加隐私安全</span></label></div><div class="share-method-line share-public-panel"><input type="radio" id="share-method-public" name="share-method" value="public"/><span class="icon icon-radio-non radio-icon"></span><label for="share-method-public"><b>公开</b><span>任何人可查看或下载，同时出现在您的<a class="share-home-href" href="/share/home" target="_blank">个人主页</a></span></label><span class="share-public-tip" style="display:none;"></span></div></td></tr><tr><td class="first-child"><label>有效期</label></td><td class="choose-panel"><button class="g-button g-button-large-gray choose-value"><span class="text">永久有效</span><em class="icon icon-dropdown-select"></em></button><ul class="choose-list"><li class="choose-checked" value="0"><em>永久有效</em><span class="icon">&#xe932;</span></li><li value="7"><em>7天</em></li><li value="1"><em>1天</em></li></ul></td></tr></table>    <div class="create-success">         <span class="public">             <em class="icon"></em>            成功创建公开链接        </span>         <span class="private">             <em class="icon"></em>            成功创建私密链接        </span>     </div>     <div class="link-info">         <div class="copy-button-section">             <a class="g-button g-button-blue copy-button" id="copyShare">                 <span class="g-button-right">                    <span class="text public">复制链接</span>                     <span class="text private">复制链接及密码</span>                 </span>            </a>            <div class="copy-tips">复制链接成功</div>        </div>        <div class="url"> <div class="share-url-border">         <input type="text" spellingcheck="false" readonly="readonly" class="share-url" value="" />          <span class="border-img"></span>         <span class="share-validity-tip">链接永久有效</span></div>        </div>         <div class="password">             <h4>提取密码</h4> <input type="text" class="share-password" spellingcheck="false" readonly="readonly" value="" />         </div>     </div>     <div class="description">         <span class="public">             1.生成文件下载链接 <br/>            2.把链接通过QQ、微博、人人网、QQ空间等方式分享给好友         </span>         <span class="private">             可以将链接发送给你的QQ等好友         </span>     </div> </div>';this.container.html(e),"string"==typeof l.sampling&&l.sampling.indexOf("company_pub")>=0&&a(".open-share-warning").html("<p>公司内部文件禁止创建公开链接</p>");var i=l.pansuk;i&&i.length>0&&l.MYUK&&a(".share-home-href").attr("href","/share/home?uk="+l.MYUK+"&suk="+i)},bindEvent:function(){var e=this;e.container.delegate(".share-method-line input[type=radio]","click",function(){e.container.find(".radio-icon").removeClass("icon-radio-checked").addClass("icon-radio-non"),a(this).next(".radio-icon").removeClass("icon-radio-non").addClass("icon-radio-checked");var i=a(".share-public-panel");"public"===a(this).val()?(i.css("color","#ed5127"),i.find("b").css("color","#ed5127"),i.find("a").css("color","#ed5127"),a(".share-public-tip").css("display","block")):(i.css("color","#8b909e"),i.find("b").css("color","#424e67"),i.find("a").css("color","#3b8cff"),a(".share-public-tip").css("display","none"))}),e.container.delegate(".choose-value","click",function(){e.container.find(".choose-list").toggle()}).delegate(".choose-value","blur",function(){e.container.find(".choose-list").hide()}),e.container.delegate(".choose-list li","mousedown",function(){e.validity=a(this).val(),e.validityText=a(this).find("em").text(),e.container.find(".choose-list li").removeClass("choose-checked"),e.container.find(".choose-list li span").remove(),a(this).addClass("choose-checked").append('<span class="icon">&#xe932;</span>'),e.container.find(".choose-value .text").text(e.validityText),e.container.find(".choose-list").hide()})},initValidity:function(){this.status=s.STATUS_CREATE_PRIVATE,this.validity=s.VALIDITY_INITIALIZE,this.validityText=s.VALIDITY_TEXT_INITIALIZE,this.container.find(".create-link").attr("class","create-link"),this.container.find(".share-method-line input[type=radio]").eq(0).prop("checked",!0),this.container.find(".radio-icon").removeClass("icon-radio-checked").addClass("icon-radio-non"),this.container.find(".share-method-line input[type=radio]").eq(0).next(".radio-icon").removeClass("icon-radio-non").addClass("icon-radio-checked"),this.container.find(".choose-list li").removeClass("choose-checked"),this.container.find(".choose-list li span").remove(),this.container.find(".choose-list li").eq(0).addClass("choose-checked").append('<span class="icon">&#xe932;</span>'),this.container.find(".choose-value .text").text(this.validityText),this.container.find(".share-validity-tip").text("链接永久有效"),this.container.find(".choose-list").hide()},updateFilesList:function(e){"[object Array]"===Object.prototype.toString.call(e)&&(this.publicInfo=null,this.fileslist=e,this.initValidity())},createShareLink:function(e){if("[object Array]"!==Object.prototype.toString.call(this.fileslist))return void(disk.DEBUG&&console.log("[WARN] the list is not array type , can not create share."));var i=this;if(i.disabledShare){var t=n[i.shareError];return i.onNeedTips(t),!1}o().ui.tip({mode:"loading",msg:"正在创建分享链接，请稍候",autoClose:!1});var r={fid_list:[],schannel:0,channel_list:"[]",period:i.validity};if(a.each(i.fileslist,function(e,i){null!==i.fs_id&&"undefined"!=typeof i.fs_id&&r.fid_list.push(i.fs_id)}),i.status===s.STATUS_CREATE_PRIVATE){var l=i.makePrivatePassword();a(".share-password",i.container).val(l),r.schannel=4,r.pwd=l}if(this.container.find(".share-validity-tip").text(i.validity&&i.validity>0?"链接"+i.validity+"天后失效":"链接永久有效"),r.fid_list.length<=0){var t="分享的文件不存在，请刷新页面重试";return i.onNeedTips(t),i.status=s.STATUS_INITIALIZE,o().ui.hideTip(),!1}r.fid_list=a.stringify(r.fid_list),a.post("/share/set?channel=chunlei&clienttype=0&web=1",r,function(t){if("string"==typeof t)try{t=a.parseJSON(t)}catch(r){}if(o().ui.hideTip(),0===t.errno){i.status===s.STATUS_CREATE_PULICE&&(i.publicInfo={link:t.shorturl||t.link,shareid:t.shareid});var l=t.shorturl||t.link;"https:"===location.protocol&&(l=l.replace("http:","https:")),a(".share-url",i.container).val(l),e(),i.setClipboard()}else{var c=o().accountBan(t.errno);c.isBan&&(o().ui.hideTip(),t.errno=c.errno,i.disabledShare=!0,i.shareError=t.errno);var d=n[t.errno]||"请求发生错误，请稍后再试";i.onNeedTips(d),i.status=s.STATUS_INITIALIZE}}).error(function(){i.onNeedTips("请求发生错误，请稍后再试")})},makePrivatePassword:function(){var e=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"],i=function(e,i){return Math.round((i-e)*Math.random()+e)},t=function(t){for(var s=[],a=1;t>=a;a++)s.push(e[i(0,e.length-1)]);return s.join("")};return t(4)},setClipboard:function(){var e=this,i=a(".share-url",e.container).val();e.status===s.STATUS_CREATE_PRIVATE&&(i="链接: "+i+" 密码: "+a(".share-password",e.container).val()),e.myClipboard||(e.myClipboard=new r(a("#copyShare"))),e.myClipboard.setText(i),e.myClipboard.on("success",function(){a("#copyShare").next(".copy-tips").show()}),e.myClipboard.on("error",function(){o().ui.tip({mode:"caution",msg:"您的浏览器不支持自动复制，请选中链接后点击右键进行复制。",autoClose:!1,hasClose:!0})})},getPublicInfo:function(){return this.publicInfo}},t.exports=s});
;define("function-widget-1:qrCode/service/panel.js",function(i,t,s){var e=i("base:widget/libs/jquerypacket.js"),a=function(i){this._mUI=i,this._mPrivateFlags=0,this._mCoor=[]};a.VISIBLE=1,a.TOP=4096,a.RIGHT=8192,a.BOTTOM=16384,a.LEFT=32768,a.CENTER=65536,a.prototype={setVisible:function(i){var t=(this._mPrivateFlags&a.VISIBLE)==a.VISIBLE;i!==t&&(i?(this._mPrivateFlags|=a.VISIBLE,this._mUI.pane.style.display="block"):(this._mPrivateFlags&=~a.VISIBLE,this._mUI.pane.style.display="none"),this.onVisibilityChange(i))},setVisibleAnimation:function(i,t){var s=(this._mPrivateFlags&a.VISIBLE)==a.VISIBLE;i!==s&&(i?(this._mPrivateFlags|=a.VISIBLE,e(this._mUI.pane).css({display:"block",opacity:0}).animate({opacity:t},500)):(this._mPrivateFlags&=~a.VISIBLE,e(this._mUI.pane).hide().css("opacity",0)),this.onVisibilityChange(i))},isVisible:function(){return(this._mPrivateFlags&a.VISIBLE)==a.VISIBLE},setSize:function(i,t){this._mUI.pane.style.width=i+"px",this._mUI.pane.style.height=t+"px"},setLocation:function(i,t){t=Math.max(0,t),this._mUI.pane.style.left=i+"px",this._mUI.pane.style.top=t+"px",this._mCoor[0]=i,this._mCoor[1]=t},getLocation:function(){return this._mCoor},setGravity:function(t){var s=i("base:widget/libs/jquerypacket.js");switch(t){case a.LEFT:this.setLocation(0,0);break;case a.CENTER:this.setLocation((s(window).width()-this._mUI.pane.offsetWidth)/2,(s(window).height()-this._mUI.pane.offsetHeight)/2+s(window).scrollTop());break;case a.TOP:this.setLocation((s(window).width()-this._mUI.pane.offsetWidth)/2,65)}},onVisibilityChange:function(){}},s.exports=a});
;define("function-widget-1:qrCode/service/twoDimension.js",function(e,t,i){var n=e("base:widget/libs/jquerypacket.js"),o=e("function-widget-1:qrCode/service/panel.js"),a=function(e){this.action(e),this._init()};a.iframeId=disk.obtainId(),a.getIframeObj=function(){var e=n("#"+a.iframeId);return e.length||(n(document.body).append('<iframe src="about:blank" id="'+a.iframeId+'" class="iframe_two_dimension_code" frameborder="0"></iframe>'),e=n("#"+a.iframeId)),e},a.Templates={bottom_msg:this.imgDes||"扫描或点击二维码立即安装",main_html:function(e,t,i,n,o,a,c){return'<div id="'+e+'" class="dialog_two_dimension_code '+c+'"><div class="inner_two_dimension_code"><div class="two_dimension_code_'+a+("down"==a?" rotate-3":"")+'"></div><div title="'+n+'" class="two_dimension_code_main" ></div></div></div>'},click_url:"//pan.baidu.com/download"},a.prototype=new o,a.prototype.action=function(e){n("#"+e.id).remove();var t=this;t.target=e.target||null,t.topOffset=e.topOffset||0,t.leftOffset=e.leftOffset||0,t.imgSrc=e.imgSrc||"",t.imgTit=e.imgTit||"",t._targetId=e.id||disk.obtainId(),t.flagAddIframe=e.flagAddIframe||!1,t.imgDes=e.imgDes||a.Templates.bottom_msg,t.clickUrl=e.clickUrl||a.Templates.click_url,t.panl=null,t.arrowPos=e.arrowPos||"top",t.changetextdec=e.changetextdec||!1,t.showsource=e.showsource||"",t.className=e.className||"",this.hoverCallBack=e.hoverCallBack||null,this.leaveCallBack=e.leaveCallBack||null,t.panlclick=e.panlclick,t.timer=null,o.call(this,this._prebuild()),t.bindEvent()},a.prototype._prebuild=function(){var e=this;n(document.body).append(a.Templates.main_html(e._targetId,e.imgSrc,e.imgDes,e.imgTit,e.bottomMsg,e.arrowPos,e.className)),e.panl=n("#"+e._targetId);var t=function(t){(1==t.complete||"complete"==t.readyState||"loaded"==t.readyState)&&(e.panl.find(".two_dimension_code_main").html("").append(t).find("img").css("marginTop",10),e.panl.find(".inner_two_dimension_code").append('<div class="two_dimension_code_bottom">'+e.imgDes+"</div>"))},i=function(){e.panl.find(".two_dimension_code_main").html("生成失败，<a href='javascript:void(0);' class='retryBtn'>重试一下</a>"),e.panl.find(".retryBtn").click(function(){o()})},o=function(){e.panl.find(".two_dimension_code_main").html("正在生成二维码……"),e.panl.find(".two_dimension_code_bottom").remove();var n=new Image;n.src=e.imgSrc||"",n.onload=function(){t(n)},n.onerror=function(){i(n)}};return o(),{pane:e.panl[0]}},a.prototype.bindEvent=function(){var e=this;e.target&&e.target.mouseenter(function(){e.changetextdec||e.changeUnderLine(!0),e.setVisible(!0)}).mouseleave(function(){e.changeUnderLine(!1),e.timer=setTimeout(function(){e.setVisible(!1)},100)}),e.panl&&e.panl.mouseover(function(){e.changetextdec||e.changeUnderLine(!0),"function"==typeof e.hoverCallBack&&e.hoverCallBack(),clearTimeout(e.timer),e.setVisible(!0)}).mouseleave(function(){e.changeUnderLine(!1),e.setVisible(!1),"function"==typeof e.leaveCallBack&&e.leaveCallBack()})},a.prototype._init=function(){var e=this,t=function(){window.open(e.clickUrl)};e.panlclick||(e.panl&&e.panl.click(function(){t()}),e.target&&e.target.click(function(){t()})),n("#retryBtn").click(function(){retry()})},a.prototype.changeUnderLine=function(e){var t=this,i=e?"underline":"none",n=t.target;"A"==n.attr("tagName")?n.css("textDecoration",i):n.find("a").css("textDecoration",i)},a.prototype.getPosi=function(){var e=this,t=e.target.width()+parseInt(e.target.css("paddingLeft"),10),i=(e.target.height(),e.target.offset()),o=i.left-10,a=i.top+e.topOffset+18,c=n(window).width(),r=c===e.panl.width()?182:e.panl.width();return o+=t-r+e.leftOffset,{x:o,y:a}},a.prototype.setVisible=function(e){var t,i=this;e&&i.target&&(t=this.getPosi(),i.setLocation(t.x,t.y)),"down"==i.arrowPos&&(n(".dialog_two_dimension_code").css("paddingBottom","9px"),n(".iframe_two_dimension_code").css("height","200px")),i.flagAddIframe&&a.getIframeObj().css(e?{left:t.x,top:t.y,zIndex:888,display:"block"}:{display:"none"}),o.prototype.setVisible.call(i,e)},a.prototype.addAnalytics=function(){},i.exports=a});
;define("function-widget-1:guide/util/promo/activity/couponText.js",function(o,i,s){function n(){a.on("click",".btn-consume",function(){c(this).parent().remove(),e.hide(),c(this).hasClass("btn-coupon-repeat")||t().log.send({type:"disk_home_dialog_consume_coupon_click"}),window.open("/buy/checkoutcounter?svip=1&from=coupon","_blank")}),a.on("click",".dialog-close,.btn-activity-over",function(){c(this).parent().remove(),e.hide()})}var e=o("system-core:system/uiService/canvas/canvas.js"),t=o("function-widget-1:guide/context.js").getContext,c=o("base:widget/libs/jquerypacket.js"),a=c("body"),d=[function(o){if(0===o.length)return"";for(var i=0,s=[],n=0,e=o.length;e>n;n++){var t=parseFloat(o[n].value/100,10);i+=t,s.push(t+"元")}return'<div class= "get-coupon-dialog"><span class="dialog-close">&times;</span><div class="coupon-value"><span>'+i+'</span>元</div><div class="coupon-type">超级会员优惠券</div><div class="coupon-msg">*优惠券包括：'+s.join("、")+'各一张</div><div class="btn-dialog btn-consume">立即使用</div></div>'},function(){return'<div class="activity-over"><span class="dialog-close">&times;</span><div class="activity-over-msg">很遗憾，活动已结束。下次请早一点来哦~</div><div class="btn-dialog btn-activity-over">知道了</div></div>'},function(){return'<div class="coupon-get-repeat"><span class="dialog-close"></span><div class="coupon-repeat-msg">您已领取过优惠券咯，快去使用吧~</div><div class="btn-dialog btn-coupon-repeat btn-consume">立即使用</div></div>'}];s.exports=function(o,i){var s=d[o];s&&(a.append(s(i)),e.addAnimate({opacity:.5}).show(),n())},s.exports.NORMAL=0,s.exports.OVER=1,s.exports.REPEAT=2});
;define("function-widget-1:guide/util/promo/activity/vipCoupon.js",function(e,t,o){var n=e("function-widget-1:guide/util/promo/activity/couponText.js"),i=e("base:widget/storage/storage.js"),a=e("function-widget-1:guide/context.js").getContext,s=e("base:widget/libs/jquerypacket.js"),c={},l=+yunData.CURRACTIVITYCODE,r=1e3*+yunData.activity_end_time,u="disk"===(/^\/(\w+?)\//.exec(location.pathname)||[])[1]?"home":"share";9===l?c={title:"2017圣诞节领券活动",flag:"coupon_consume",name:"coupon_consume",storageKey:"christmas_2017",className:"coupon-banner",btnCloseClass:"coupon-consume-close",width:288,height:130,backgroundImage:"url(/box-static/function-widget-1/guide/util/promo/img/christmas_2017_12c1871.png)"}:10===l?c={flag:"svip_present",title:"超级会员满赠活动",name:"svip_buy_present",className:"gift-banner",btnCloseClass:"gift-close",width:310,height:144,backgroundImage:"url(../img/gift_banner_2nd.png)"}:2===+yunData.SHOWVIPAD&&(c={title:"百度网盘幸运转盘",flag:"lottery_showlove",name:"lotteryShowlove",storageKey:"lottery_showlove",className:"showlove-banner",btnCloseClass:"showlove-close",width:216,height:126,backgroundImage:"url(/box-static/function-widget-1/guide/util/promo/img/lottery-showlove_d2edb16.png)"});var g=(c.storageKey||"hide_couponbanner")+"_uk_"+yunData.MYUK,d=function(){i.getItem(g)||i.setItem(g,!0)};o.exports={title:c.title,name:c.name,className:c.className,cssText:{width:c.width,height:c.height,backgroundImage:c.backgroundImage},href:c.href,btnCloseClass:c.btnCloseClass,isRender:function(){if(9===l||10===l){var e="";return e=9===l?"disk_home_coupon_banner_display":"disk_home_gift_banner_display",a().log.send({type:e}),!0}return!1},clickCallback:function(){var e=a();if("coupon_consume"===c.flag)s.ajax({url:"/rest/2.0/membership/activity/coupon?method=consume",method:"GET",dataType:"json",success:function(e){e.coupon_list&&e.coupon_list.length&&n(n.NORMAL,e.coupon_list)},error:function(t){var o=+(/error_code":(\d+)/.exec(t.responseText)||[])[1];if(o)switch(o){case 39521:n(n.OVER);break;case 39515:n(n.REPEAT);break;case 39514:e.ui.alert("您无权领取优惠券");break;case 39516:e.ui.alert("优惠券已领光")}}}),e.log.send({type:"disk_home_coupon_consume_click"});else if("svip_present"===c.flag){var t=(new Date).getTime();if(!r)return;t>r?n(n.OVER):window.open("/buy/checkoutcounter?svip=1&activityfrom=give","_blank"),e.log.send({type:"disk_home_gift_banner_click_from_give",from:"give"}),e.log.sendBaiduLog("disk_home_gift_banner_click","网盘满赠广告位点击")}else"lottery_showlove"===c.flag&&window.open("https://pan.baidu.com/huodong/lottery/showlove?from="+u,"_blank");d()},closeCallback:d}});
;define("function-widget-1:guide/util/ablityShow/slide/slide.js",function(o,e,u){var t=o("base:widget/libs/jquerypacket.js"),i={supportCss3:function(o){for(var e=["webkit","Moz","ms","o"],u=[],t=document.documentElement.style,i=function(o){return o.replace(/-(\w)/g,function(o,e){return e.toUpperCase()})},s=0;s<u.length;s++)u.push(i(e[s]+"-"+o));u.push(i(o));for(var n=0;n<u.length;n++)if(u[n]in t)return!0;return!1}},s=function(o){var o=o||{},e={autoHideButton:o.autoHideButton||!1,autoRun:o.autoRun||!1,autoTime:o.autoTime||3e3,autoStop:o.autoStop||!0,indexCallBack:"function"==typeof o.indexCallBack?o.indexCallBack:function(){o.indexCallBack()},firstCallBack:"function"==typeof o.firstCallBack?o.firstCallBack:function(){},lastCallBack:"function"==typeof o.lastCallBack?o.lastCallBack:function(){o.lastCallBack()}},u={focusLeft:0,focusIndex:0,foucusLen:0,autoTimer:null},s={moduleFocusSwitchNext:".module-focus-switch .next",moduleFocusSwitchPrev:".module-focus-switch .prev",moduleFocusUlLi:".module-focus-ul li",moduleFocusUl:".module-focus-ul",moduleFocusDiv:".module-focus-div",moduleFocusFocusbarUl:".module-focus-focusbar ul",moduleFocusFocusbarLi:".module-focus-focusbar ul li",moduleFocusBoxClose:".module-focus-box .close",moduleFocusBox:".module-focus-box",beginBtn:".module-focus-box .begin-btn",userAblityShow:".module-focus-box .user-ablity-show",userAblityShow1:".module-focus-box .user-ablity-show:eq(0)",userAblityShow2:".module-focus-box .user-ablity-show:eq(1)",userAblityShow3:".module-focus-box .user-ablity-show:eq(2)",userAblityShow4:".module-focus-box .user-ablity-show:eq(3)"},n={startFocus:function(){var o=t(s.moduleFocusUlLi).length;u.foucusLen=o,n.setFocusIndex(0,n.focusCallBack),t(s.moduleFocusSwitchPrev).click(function(){return u.focusIndex<=0?!1:(u.focusIndex-=1,n.indexFunction(u.focusIndex),void n.setFocusIndex(u.focusIndex,n.focusCallBack))}),t(s.moduleFocusSwitchNext).click(function(){return u.focusIndex>=u.foucusLen-1?!1:(u.focusIndex+=1,n.indexFunction(u.focusIndex),void n.setFocusIndex(u.focusIndex,n.focusCallBack))}),t("body").on("click",s.moduleFocusFocusbarLi,function(){var o=t(this).index();n.setFocusIndex(o,n.focusCallBack)}),t("body").on("mouseover",s.moduleFocusBox,function(){n.stopAutoRun()}),t("body").on("mouseleave",s.moduleFocusUl,function(){n.autoRun()})},setFocusIndex:function(o,i){u.focusIndex=o;for(var a="",l=0;l<u.foucusLen;l++)a+=o===l?'<li class="active"><a href="javascript:void(0);"></a> </li>':'<li><a href="javascript:void(0);"></a> </li>';u.focusIndex===u.foucusLen-1?(n.lastFunction(u.focusIndex),e.autoHideButton&&(t(s.moduleFocusSwitchPrev).fadeIn(300),t(s.moduleFocusSwitchNext).fadeOut(300))):0===u.focusIndex?(n.firstFunction(u.focusIndex),e.autoHideButton&&(t(s.moduleFocusSwitchNext).fadeIn(300),t(s.moduleFocusSwitchPrev).fadeOut(300))):(t(s.moduleFocusSwitchNext).fadeIn(300),t(s.moduleFocusSwitchPrev).fadeIn(300)),t(s.moduleFocusFocusbarUl).find("li").length<=0?t(s.moduleFocusFocusbarUl).html(a):(t(s.moduleFocusFocusbarUl).find("li").removeClass("active"),t(s.moduleFocusFocusbarUl).find("li").eq(o).addClass("active"));var c=t(s.moduleFocusDiv).width();t(s.moduleFocusUl).animate({left:-c*o},500),"function"==typeof i&&i(o)},focusCallBack:function(o){var e=i.supportCss3("animation");return e?void(0===o?n.animate1():1===o?n.animate2():2===o?n.animate3():3===o&&n.animate4()):(n.setNotSupportClass(),!1)},lastFunction:function(o){e.autoStop&&n.stopAutoRun(),e.lastCallBack(o)},firstFunction:function(o){e.firstCallBack(o)},indexFunction:function(o){e.indexCallBack(o)},autoRun:function(){e.autoRun&&(u.autoTimer=setInterval(function(){u.focusIndex+=1,n.setFocusIndex(u.focusIndex%u.foucusLen,n.focusCallBack)},e.autoTime))},stopAutoRun:function(){clearInterval(u.autoTimer)},animate1:function(){t(s.userAblityShow1).find(".animate").removeClass("animate"),setTimeout(function(){t(s.userAblityShow1).find(".img-slide-left").addClass("animate");var o=t(s.userAblityShow1).find(".img-slide-left")[0],e=t(s.userAblityShow1).find(".click")[0];return o||e?void o.addEventListener("animationend",function(){t(s.userAblityShow1).find(".click").addClass("animate"),setTimeout(function(){t(s.userAblityShow1).find(".hover-img").addClass("animate"),t(s.userAblityShow1).find(".click").removeClass("animate")},700)},!1):!1},500)},animate2:function(){t(s.userAblityShow2).find(".animate").removeClass("animate"),setTimeout(function(){t(s.userAblityShow2).find(".img-slide-left").addClass("animate");var o=t(s.userAblityShow2).find(".img-slide-left")[0],e=t(s.userAblityShow2).find(".img-click")[0];return o||e?void o.addEventListener("animationend",function(){t(s.userAblityShow2).find(".img-click").addClass("animate"),setTimeout(function(){t(s.userAblityShow2).find(".hover-img2").addClass("animate"),t(s.userAblityShow2).find(".img-click").removeClass("animate")},700)},!1):!1},500)},animate3:function(){t(s.userAblityShow3).find(".animate,.show").removeClass("animate").removeClass("show"),setTimeout(function(){t(s.userAblityShow3).find(".img-slide-left").addClass("animate");var o=t(s.userAblityShow3).find(".img-slide-left")[0],e=t(s.userAblityShow3).find(".message-click")[0];return o||e?void o.addEventListener("animationend",function(){t(s.userAblityShow3).find(".message-img-1").addClass("show"),t(s.userAblityShow3).find(".message-click").addClass("animate"),setTimeout(function(){t(s.userAblityShow3).find(".message-img-1").addClass("animate"),t(s.userAblityShow3).find(".message-img-2").addClass("animate")},700)},!1):!1},500)},animate4:function(){t(s.userAblityShow4).find(".animate").removeClass("animate"),t(s.userAblityShow4).find(".begin-btn").hide(),setTimeout(function(){t(s.userAblityShow4).find(".begin-btn").fadeIn(300),t(s.userAblityShow4).find(".cloud").addClass("animate")},500)},setNotSupportClass:function(){t(s.userAblityShow).find(".img-slide-left").addClass("not-support"),t(s.userAblityShow).find(".cloud").addClass("not-support"),t(s.userAblityShow).find(".hover-img2").addClass("not-support")}};n.startFocus(),n.autoRun()};u.exports=s});
;define("function-widget-1:guide/util/classifyTip/classifyTip.js",function(s,i,n){var e=s("base:widget/libs/jquerypacket.js"),t=(s("function-widget-1:guide/context.js"),{q:{close:"a.known"},renderAndEvent:function(){var s=e(".classify-button");if(s.length){var i,n=this,t=[];t.push('<div class="module-classifyDialog">'),t.push('<div class="triangle"></div>'),t.push('<div class="triangle2"></div>'),t.push('<div class="module-content">'),t.push('<p class="content">全新智能分类，找图更便捷。</p>'),t.push('<a class="known" href="javascript:void(0);">知道了</a>'),t.push("</div>"),t.push("</div>"),i=e(t.join("")),this.$dom=i,s.append(i),n.event()}},event:function(){this.$dom.on("click",this.q.close,function(s){e(s.target).parents(".module-classifyDialog").remove()})}}),a={show:function(){t.renderAndEvent()}};n.exports=a});
;define("function-widget-1:guide/util/picNewTip/picNewTip.js",function(e,o,c){var i=e("base:widget/libs/jquerypacket.js"),l=(e("base:widget/storage/storage.js"),e("function-widget-1:guide/context.js")),s={tpl:'<div class="welcome-mask"></div><div class="welcome-box">    <div class="welcome-bg">        <div class="welcome-pic"></div>        <div class="welcome-word"></div>        <div class="welcome-begin"></div>    </div>    <div class="welcome-close"></div></div>',mod:{welcomeMask:".welcome-mask",welcomeBox:".welcome-box",welcomeBg:".welcome-bg",welcomePic:".welcome-pic",welcomeWord:".welcome-word",welcomeBegin:".welcome-begin",welcomeClose:".welcome-close"},initEvents:function(){i(s.mod.welcomeBegin).on("click",function(){window.location.href="/disk/timeline",l.getContext().log.send({type:"picNew_guide_close"})}),i(s.mod.welcomeClose).on("click",function(){i(s.mod.welcomeBox).remove(),i(s.mod.welcomeMask).remove()})}},w={show:function(){i("body").prepend(s.tpl),s.initEvents()}};c.exports=w});
;define("function-widget-1:guide/util/cardHolder/cardHolderTip/cardHolderTip.js",function(e,d,i){var o=e("base:widget/libs/jquerypacket.js"),s=e("base:widget/storage/storage.js"),c=window.yunData,t={base:function(){return['<div class="module-cardtip-mask"></div>','<div class="module-cardtip-box">','<div class="card"></div>','<div class="module-content">','<div class="close icon icon-close"></div>','<div class="words">','<p class="tipsword">新增我的卡包，证件存储更加安全！</p>','<p class="tip-button">知道了</p>',"</div>","</div>"]},render:function(){s.setItem(c.MYUK+"_card_tip",!0);var e=t.base();o("body").append(e.join(""))},events:function(){o(".close").on("click",function(){o(".module-cardtip-mask").remove(),o(".module-cardtip-box").remove()}),o(".tip-button").on("click",function(){o(".module-cardtip-mask").remove(),o(".module-cardtip-box").remove()})}},a={show:function(){t.render("success"),t.events()}};i.exports=a});
;define("function-widget-1:guide/util/cardHolder/cardHolderKeyImport/cardHolderKeyImport.js",function(e,a,r){var s=e("system-core:system/baseService/message/message.js"),o={show:function(e,a){var r={params:e,data:a};s.callPlugin("一键导入证件@com.baidu.pan",r)}};r.exports=o});
;define("function-widget-1:guide/util/cardHolder/cardHolderGiveSpace/cardHolderGiveSpace.js",function(e,d,o){var a=e("base:widget/libs/jquerypacket.js"),t=window.yunData,n=e("function-widget-1:guide/context.js"),c=e("base:widget/storage/storage.js"),i=n.getContext().message,s={data:{},endTime:0,startTime:0,sendLog:function(e){n.getContext().log.send({type:e,value:"",sendServerLog:!0})},base:function(){return['<div class="module-cardguide-mask"></div>','<div class="module-cardguide-box">','<div class="card"></div>','<div class="module-content">','<div class="close icon icon-close"></div>','<div class="words">',"</div>","</div>","</div>"]},render:function(){var e=s.base();a("body").append(e.join("")),a("body").find(".module-cardguide-box .module-content .words").append(['<p class="tipsword">'+s.data.msg+"</p>",'<p class="spaceword">在"我的卡包"中，新添加1张证件即可获得。</p>','<p class="space-button">去添加</p>'].join(""))},getParams:function(e){var d=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),o=window.location.href.substr(1).match(d);return null!=o?decodeURIComponent(o[2]):null},events:function(){a(".close").on("click",function(){c.setItem(t.MYUK+"_card_space",!0),s.endTime=Date.parse(new Date),n.getContext().log.send({type:"cardholder_activity_close_time",time:s.endTime-s.startTime,url:"//update.pan.baidu.com/statistics",clienttype:"0",op_from:"webcardhandle",op:"cardholder"}),s.sendLog("cardHolder_activity_close"),a(".module-cardguide-mask").remove(),a(".module-cardguide-box").remove()}),a(".space-button").on("click",function(){a(".module-cardguide-mask").remove(),a(".module-cardguide-box").remove(),s.sendLog("cardHolder_activity_addBtn_click"),i.callPlugin("网盘二级密码@com.baidu.pan",{successCb:function(){s.sendLog("cardHolder_activity_addBtn_enter_cardholder");var e=s.getParams("vmode");e&&(window.location.hash="#cardholder/path="+encodeURIComponent("/cardholder")+"&vmode="+e),window.location.hash="#cardholder/path="+encodeURIComponent("/cardholder")}})})}},r={show:function(e,d){c.setItem(t.MYUK+"_card_space",!1),s.startTime=Date.parse(new Date),s.data=d,s.render(),s.events(),s.sendLog("cardHolder_activity_show")}};o.exports=r});
;define("function-widget-1:guide/util/promo/promo.js",function(e,n,o){"use strict";var c=e("base:widget/libs/jquerypacket.js"),i=e("function-widget-1:guide/context.js").getContext,t=e("function-widget-1:guide/util/promo/activity/vipCoupon.js"),a={node:{active:".coupon-banner-active",close:".banner-close"},render:function(e){var n=['<div class="coupon-banner-active">',e?'<a href="'+e+'" target="_blank"></a>':"",'<i class="banner-close"></i>',"</div>"].join("");c(document.body).append(n),a.bindUI()},bindUI:function(){var e=c(a.node.active);e.css(t.cssText),t.className&&e.addClass(t.className),t.btnCloseClass&&c(a.node.close).addClass(t.btnCloseClass),e.on("click",function(){a.util.feLog(t.name+"_active_banner_click"),a.util.click()}),c(a.node.close).on("click",function(e){e.stopPropagation(),a.util.feLog(t.name+"_active_banner_close"),a.util.close()})},util:{click:function(){this.destroy(),t.clickCallback&&t.clickCallback()},close:function(){this.destroy(),t.closeCallback&&t.closeCallback()},feLog:function(e){var n=i().log;n.send({type:e})},destroy:function(){c(a.node.active).remove()}}};o.exports={show:function(){var e=t.isRender;e()&&a.render(t.href)}}});
;define("function-widget-1:guide/util/directorTip/directorTip.js",function(e,t,n){var o=e("base:widget/libs/jquerypacket.js"),i=e("base:widget/storage/storage.js"),a=window.yunData,c=a.MYNAME+"_director_guide",r={node:{panel:'div[node-type="directorTip-panel"]',close:'em[node-type="directorTip-close"]'},api:{categoryList:"/api/categorylist"},conf:{ajaxControl:!1,hasTips:!1},init:function(){i.getItem(c)||(r.preBuild(),r.getImageNum())},preBuild:function(){var e='<div class="directorTip-panel" node-type="directorTip-panel"><em class="directorTip-close" node-type="directorTip-close"></em></div>';o("body").append(e),r.bindEvents()},bindEvents:function(){o(r.node.close).on("click",function(){r.hide(),r.conf.hasTips=!1,i.setItem(c,1)})},hide:function(){r.conf.hasTips&&o(r.node.panel).hide()},show:function(e,t){var n=o(r.node.panel);r.conf.hasTips&&(n.css("top",e+30),n.css("left",t-150),n.show())},getImageNum:function(){var e={category:3,num:100};r.sendAjax({url:r.api.categoryList,type:"POST",data:e},function(e){e.info.length>=100&&(r.conf.hasTips=!0)})},sendAjax:function(e,t,n){r.conf.ajaxControl||(r.conf.ajaxControl=!0,o.ajax({url:e.url,type:e.type||"GET",data:e.data||"",dataType:"json",success:function(e){r.conf.ajaxControl=!1,0===e.errno?"function"==typeof t&&t(e):"function"==typeof n&&n(e)},error:function(e){r.conf.ajaxControl=!1,"function"==typeof n&&n(e)}}))}},s={show:function(){r.init(),function(){var e=null,t=o(".g-button .icon-director").parents(".g-button"),n=function(){if(0!=o(".list-header-operate .opacity-button-box").length||t.is(":hidden"))r.hide();else{var n=t.offset();0==n.top&&0==n.left?r.hide():(r.show(n.top,n.left),clearInterval(e))}};return 0===t.length?!1:void(e=setInterval(n,500))}()}};n.exports=s});
;define("function-widget-1:guide/util/enterpriseTip/enterpriseTip.js",function(e,t,i){"use strict";var n=e("base:widget/libs/jquerypacket.js"),r=e("base:widget/storage/storage.js"),s=e("function-widget-1:guide/context.js").getContext(),a=window.yunData,o={api:{userFlag:"/api/userflag",enterpriseUserCheck:"/enterprise/user/check"},conf:{reset:!1,isFirst:!1,firstTipTime:null,lastTipTime:null,tipTimes:null},buildTip:function(){var e='<span node-type="icon-warn" class="icon-warn"></span><span class="enterprise-text">您的帐号近期登录设备过多，如非本人操作请<a class="enterprise-link modify-passwd">修改密码</a>。如需多人共享文件，请使用<a class="enterprise-link register-btn">百度企业网盘</a>。</span>';o.conf.tipDom=s.toolbar.setTipContent({content:e,styleType:1,className:"enterprise-tip",onClose:function(){o.setTipShowStatusInLocal(1),s.toolbar.prevDom(!1)}}),o.conf.tipDom.find(".modify-passwd").click(function(){o.setTipShowStatusInLocal(1),window.open("https://passport.baidu.com/v2/account/password","_blank")}),o.conf.tipDom.find(".register-btn").click(function(){s.log.sendBaiduLog("企业版共享帐号引导开通","企业版共享帐号引导开通"),window.open("https://eyun.baidu.com/enterprise/register?from=yunanquan","_blank")}),s.toolbar.prevDom(o.conf.tipDom,2),s.log.send({type:"enterpriseTip_shareAccount"}),s.log.sendBaiduLog("企业版共享帐号引导","企业版共享帐号引导展现")},getStorageKey:function(){return"enterpriseTip_"+a.MYUK},isEnterpriseUser:function(e){n.ajax({url:o.api.enterpriseUserCheck,type:"GET",success:function(t){1!==+t.result&&"function"==typeof e&&e()},error:function(){}})},getYearWeek:function(e){if(e.timestamp)var t=new Date(e.timestamp).getFullYear(),i=new Date(e.timestamp).getMonth()+1,n=new Date(e.timestamp).getDate();else var t=e.y,i=e.m,n=e.d;var r=new Date(t,i-1,n),s=new Date(t,0,1),a=Math.round((r.getTime()-s.getTime())/864e5);return Math.ceil((a+s.getDay())/7)},getTipShowStatusforLocal:function(){var e=!1,t=o.getStorageKey(),i=+new Date;if(r.getItem(t)){var n=r.getItem(t).split("_"),s=o.conf.firstTipTime=+n[0],a=o.conf.tipTimes=+n[1],p=864e5;if(+a){var c=o.getYearWeek({timestamp:i}),u=o.getYearWeek({timestamp:s});i-s>p&&c!==u&&(e=!0)}else e=!0}else e=!0;return e},checkServer:function(){var e,t="getServerUserFlagApi",i=o.getYearWeek({timestamp:+new Date}),n=r.getItem(t),s=0;return n&&(e=+n.split("_")[0],s=+n.split("_")[1]),{isSameWeek:i===e,isShow:s}},setTipShowStatusInLocal:function(e){var t=+new Date+"_"+e;r.setItem(o.getStorageKey(),t)},getUserStatusfromServer:function(){var e=o.checkServer();e.isSameWeek?e.isShow&&o.buildTip():n.ajax({url:o.api.userFlag,type:"GET",data:{operation:"query",uk:a.MYUK},success:function(e){var t=0;null!=e.flag&&(o.buildTip(),t=1),r.setItem("getServerUserFlagApi",o.getYearWeek({timestamp:+new Date})+"_"+t)},error:function(){}})}},p={show:function(){o.isEnterpriseUser(function(){var e=o.getTipShowStatusforLocal();e&&o.getUserStatusfromServer()})}};i.exports=p});
;define("function-widget-1:guide/util/trialVipTip/trialVipTip.js",function(i,t,e){var s=i("base:widget/libs/jquerypacket.js"),n=(i("function-widget-1:guide/context.js"),i("system-core:system/uiService/canvas/canvas.js")),a={render:function(i){var t=this,e=[],a="fail",c='<span class="btn btn-fail"></span>';i&&(a="success",c='<a class="btn btn-success" href="http://yun.baidu.com/buy/center?tag=1&from=homepage" target="_blank"></a>'),e.push('<div class="trialVipDialog">'),e.push('<div node-type="result" class="result '+a+'">'),e.push(c),e.push("</div>"),e.push("</div>");var d=s(e.join(""));this.$dom=d,s(document.body).append(d),n.addAnimate({opacity:.7}).show(),t.bindEvent()},bindEvent:function(){var i=this;i.$dom.find(".btn").click(function(){i.hide()})},hide:function(){this.$dom.remove(),n.hide()}},c={show:function(i){var t=i?i.isVip:!1;a.render(t)}};e.exports=c});
;define("function-widget-1:guide/util/vipTip/vipTip.js",function(e,t,a){var s=e("base:widget/libs/jquerypacket.js"),i=e("system-core:system/uiService/canvas/canvas.js"),n={q:{previous:"a[node-type=previous]",next:"a[node-type=next]",close:"a[node-type=close]"},step:0,renderAndEvent:function(){var e=this,t=s('<div class="feature-manual feature-manual-step-'+this.step+'"><div class="feature-manual-content"><a hidefocus="true" node-type="close" href="javascript:void(0);" class="b-fm-close" title="关闭"></a><a hidefocus="true" node-type="previous" href="javascript:void(0);" title="上一步" class="feature-manual-btn feature-manual-prev"></a><a hidefocus="true" node-type="next" href="javascript:void(0);" title="下一步" class="feature-manual-btn feature-manual-next"></a></div><div class="feature-manual-shadow"></div>');this.$dom=t,s(document.body).append(t),i.show(),e.event()},event:function(){var e=this;this.$dom.find(this.q.next).bind("click",function(){e.$dom.removeClass("feature-manual-step-"+e.step).addClass("feature-manual-step-"+ ++e.step),4===e.step&&(e.$dom.remove(),i.hide())}),this.$dom.find(this.q.previous).bind("click",function(){e.$dom.removeClass("feature-manual-step-"+e.step).addClass("feature-manual-step-"+--e.step)}),this.$dom.find(this.q.close).bind("click",function(){e.$dom.remove(),i.hide()})}},d={show:function(){n.renderAndEvent()}};a.exports=d});
;define("function-widget-1:guide/util/mboxTip/mboxTip.js",function(e,n,s){var i=e("base:widget/libs/jquerypacket.js"),t=e("function-widget-1:guide/context.js"),o=(e("system-core:system/uiService/canvas/canvas.js"),{q:{close:"a.known"},renderAndEvent:function(){var e,n=this,s=[];s.push('<div class="module-discoveryDialog">'),s.push('<p class="content">“主页”移到“更多”，更名为“分享动态”</p>'),s.push('<a class="known" href="javascript:void(0);">知道了</a>'),s.push("</div>"),e=i(s.join("")),this.$dom=e,i(document.body).append(e),n.event()},event:function(){this.$dom.on("click",this.q.close,function(e){i(e.target).parents(".module-discoveryDialog").remove()})}}),c={show:function(){o.renderAndEvent(),t.getContext().log.send({type:"discovery_tips_dialog_display"})}};s.exports=c});
;define("function-widget-1:guide/util/ablityShow/ablityShow.js",function(i,s,o){var t=i("base:widget/libs/jquerypacket.js"),l=i("base:widget/storage/storage.js"),c=i("function-widget-1:guide/context.js"),u=i("function-widget-1:guide/util/ablityShow/slide/slide.js"),a={tmpl:{base:function(i){return['<div class="module-mask-trans50"></div>','<div class="module-focus-box">','<div class="close icon icon-close"></div>','<div class="module-focus-switch">','<div class="prev"><a href="javascript:void(0);" ></a></div>','<div class="next"><a href="javascript:void(0);" ></a></div>',"</div>",'<div class="module-focus-div">','<ul class="module-focus-ul">'+i+"</ul>","</div>",'<div class="module-focus-focusbar">',"<ul>","</ul>","</div>","</div>"]},userList:["<li>",'<div class="user-ablity-show">','<div class="img">','<img class="main-img img-slide-left" ','src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-1.png?t=1517818659974">','<a class="click" href="javascript:void(0);"></a>','<div class="arrow"></div>','<div class="hover-img">','<img class="main-img" src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-2.png?t=1517818659974"/>','<div class="img-icons">','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-2-01.png?t=1517818659974"/>','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-2-02.png?t=1517818659974"/>','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-2-03.png?t=1517818659974"/>','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-1-2-04.png?t=1517818659974"/>',"</div>","</div>","</div>",'<div class="bottom">','<div class="body-text">各种文件安全存储</div>',"<p>可以上传文档，图片，视频等各种文件到云端</p>","</div>","</div>","</li>","<li>",'<div class="user-ablity-show">','<div class="img"><img class="main-img img-slide-left" ','src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-2-1.png?t=1517818659974"></div>','<a class="img-click" href="javascript:void(0);"></a>','<div class="img-arrow"></div>','<div class="hover-img2">','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-2-2.png?t=1517818659974"/> </div>','<div class="bottom">','<div class="body-text">多种文件随时预览</div>',"<p>随时随地在线预览图片，文档，视频，压缩包等文件</p>","</div>","</div>","</li>","<li>",'<div class="user-ablity-show">','<div class="img">','<img class="main-img img-slide-left" ','src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-3-1.png?t=1517818659974">','<a class="message-click" href="javascript:void(0);"></a>','<div class="message-arrow"></div>','<div class="message-box">','<img class="message-img-1" src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-3-3.png?t=1517818659974"/>','<img class="message-img-2" src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-3-2.png?t=1517818659974"/>',"</div>","</div>",'<div class="bottom">','<div class="body-text">云端文件便捷分享</div>',"<p>点击“分享”轻松便捷与好友分享云端文件</p>","</div>","</div>","</li>","<li>",'<div class="user-ablity-show last">','<div class="img">','<a class="g-button g-button-large g-button-blue begin-btn">','<span class="g-button-right"><span class="text">立即体验</span></span>',"</a>","</div>",'<div class="logo">','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-4-logo.png?t=1517818659974"/>',"</div>",'<div class="cloud">','<img src="/box-static/function-widget-1/guide/util/ablityShow/img/_nomd5/ablity-4-cloud.png?t=1517818659974"/>',"</div>","</li>"]},obj:{focusLeft:0,focusIndex:0,foucusLen:0},mod:{moduleFocusSwitchNext:".module-focus-switch .next",moduleFocusSwitchPrev:".module-focus-switch .prev",moduleFocusUlLi:".module-focus-ul li",moduleFocusUl:".module-focus-ul",moduleFocusDiv:".module-focus-div",moduleFocusFocusbarUl:".module-focus-focusbar ul",moduleFocusFocusbarLi:".module-focus-focusbar ul li",moduleFocusBoxClose:".module-focus-box .close",moduleFocusBox:".module-focus-box",beginBtn:".module-focus-box .begin-btn"},startFocus:function(i){return"user"!==i?!1:(t("body").append(a.tmpl.base(a.tmpl.userList.join("")).join("")).hide().fadeIn(300),u({autoHideButton:!0,lastCallBack:function(){setTimeout(function(){t("body").on("click",".module-mask-trans50",function(){a.closeFocus()})},300)},indexCallBack:function(){t("body").off("click",".module-mask-trans50")},autoRun:!1}),t("body").on("click",a.mod.beginBtn,function(){a.closeFocus()}),void t("body").on("click",a.mod.moduleFocusBoxClose,function(){a.closeFocus()}))},setFocusIndex:function(i){a.obj.focusIndex=i;for(var s="",o=0;o<a.obj.foucusLen;o++)s+=i===o?'<li class="active"><a href="javascript:void(0);"></a> </li>':'<li><a href="javascript:void(0);"></a> </li>';t(a.mod.moduleFocusFocusbarUl).html(s);var l=t(a.mod.moduleFocusDiv).width();t(a.mod.moduleFocusUl).animate({left:-l*i},500)},closeFocus:function(){t(".module-mask-trans50").fadeOut(300,function(){t(".module-mask-trans50").remove()}),t(a.mod.moduleFocusBox).fadeOut(300,function(){t(a.mod.moduleFocusBox).remove()}),a.setAblityIsShowByUk(),c.getContext().message.trigger("guide-check")},getAblityIsShowByUk:function(){var i=window.yunData||{},s=i.MYUK;return l.getItem("showAblity_uk_"+s)},setAblityIsShowByUk:function(){var i=window.yunData||{},s=i.MYUK;l.setItem("showAblity_uk_"+s,!0)},isRookie:function(i){t.getJSON("/api/account/rookie?type=8",function(s){0===s.errno&&s.list&&0===+s.list[8]?"function"==typeof i&&i.call(null,1):"function"==typeof i&&i.call(null,0)})}},d={show:function(){a.startFocus("user")}};o.exports=d});
;define("function-widget-1:guide/util/shareDirTip/shareDirRootChange.js",function(t,i,o){var e=(t("base:widget/libs/jquerypacket.js"),t("function-widget-1:guide/context.js").getContext()),a=t("base:widget/historyManager/historyManager.js"),n=window.yunData,s={changeList:[],bodyHtml:"",dialogConf:{},dialog:{}};s.buildDialog=function(){for(var t=s.changeList.length,i=s.changeList[0].filename,o=0,l=/[\u4E00-\u9FA5]/,g=0;g<i.length;g++)if(l.test(i[g])?o+=2:o++,o>40){i=i.substr(0,g)+"...";break}var d="";i.length>0?(d+='"'+i+'"',d+=t>1?"等"+t+"个文件夹":"文件夹",d+="已取消共享或将您移除，无法继续查看。"):d+="部分文件夹已取消共享或将您移除，无法继续查看。",s.bodyHtml='<p class="dissmiss-text">'+d+"</p>",s.closeDialog=function(){if(0===e.list.getCurrentList().length){var t=e.ui.cacheManage.getCache().list,i=e.tools.topMountManager.FILE_IDENTITY.SHARE;n.sharedir=0,e.tools.topMountManager.demount("list",t,"/",i),e.tools.topMountManager.removeConfByPath(i),a.getDefault().addHistory("list/path="+encodeURIComponent("/"))}},s.dialogConf={title:"文件夹已被取消共享",lock:!0,close:!0,className:"sharedir-root-change-dialog",width:"450px",height:"200px",body:s.bodyHtml,position:{xy:"center"},onClose:function(){s.closeDialog()},draggable:!1,buttons:[{type:"big",title:"知道了",color:"blue",position:"center",padding:["30px","30px"],click:function(){s.dialog.hide(),s.closeDialog()}}]},s.dialog=e.ui.window(s.dialogConf),s.dialog.show(),s.dialog.$dialog.find(".dissmiss-text").height()<36&&s.dialog.height(180)};var l={show:function(t,i){s.changeList=i,s.buildDialog()}};o.exports=l});
;define("function-widget-1:guide/util/shareDirTip/setShareDismiss.js",function(i,e,t){var a=(i("base:widget/libs/jquerypacket.js"),i("function-widget-1:guide/context.js").getContext()),o=i("base:widget/historyManager/historyManager.js"),s=(window.yunData,{dirName:"",bodyHtml:"",dialogConf:{},dialog:{}});s.buildDialog=function(){var i=o.getCurrentParams().path;s.dirName=i.substr(i.lastIndexOf("/")+1);for(var e=0,t=/[\u4E00-\u9FA5]/,d=0;d<s.dirName.length;d++)if(t.test(s.dirName[d])?e+=2:e++,e>40){s.dirName=s.dirName.substr(0,d)+"...";break}s.bodyHtml=['<p class="dissmiss-text">','"'+s.dirName+'"文件夹因含非法违规内容，已被取消共享，共享成员已无法继续查看。',"</p>"].join(""),s.dialogConf={title:"文件夹已被取消共享",lock:!0,close:!0,className:"setshare-dismiss-dialog",width:"450px",height:"200px",body:s.bodyHtml,position:{xy:"center"},draggable:!1,buttons:[{type:"big",title:"知道了",color:"blue",position:"center",padding:["30px","30px"],click:function(){s.dialog.hide()}}]},s.dialog=a.ui.window(s.dialogConf),s.dialog.show()};var d={show:function(){s.buildDialog()}};t.exports=d});
;define("function-widget-1:guide/util/shareDirTip/shareDirTip.js",function(i,o,t){var d=(i("base:widget/libs/jquerypacket.js"),i("base:widget/storage/storage.js"),i("function-widget-1:guide/context.js").getContext()),n=(window.yunData,{bodyHtml:"",dialogConf:{},dialog:{}});n.buildDialog=function(){n.bodyHtml=['<div class="tip-body">','<div class="dir-icon">','<div class="dir-icon-holder"></div>',"</div>",'<p class="tip-body-title">&nbsp;新增共享文件夹！</p>','<p class="tip-body-subtitle">和其他人一起共享和管理文件吧</p>','<div class="know-button">',"<span>&nbsp;知道了</span>","</div>","</div>"].join(""),n.dialogConf={title:"",lock:!0,noFooter:!0,close:!0,className:"guide-share-dir-tip",width:"500px",height:"390px",body:n.bodyHtml,position:{xy:"center"},draggable:!1},n.dialog=d.ui.window(n.dialogConf),n.dialog.show()},n.bindEvents=function(){n.dialog.$dialog.on("click",".know-button",function(){n.dialog.hide()})};var s={show:function(){n.buildDialog(),n.bindEvents()}};t.exports=s});
;define("function-widget-1:guide/util/openFileTip/openFileTip.js",function(i,o,e){var t=i("base:widget/libs/jquerypacket.js"),n=i("function-widget-1:guide/context.js"),d={off:142,$dom:null,renderAndEvent:function(i){d.$dom=t('<div id="wizard-functions-intro" style="display:none;"><div class="intro-inner">'+i.message+'</div><div class="intro-bg"><i class="triangle-top"></i><a class="intro-close icon icon-close" hidefocus="true" href="javascript:void(0);"></a></div></div>'),t(document.body).append(d.$dom);var o=0,e=i.left;if(e+d.$dom.find(".intro-bg").outerWidth()+9>t(window).width()&&(e=e-d.$dom.find(".intro-bg").outerWidth()+90,d.$dom.find(".triangle-top").addClass("right-triangle")),i.orientation&&"top"===i.orientation){if(o=i.top-d.$dom.find(".intro-bg").outerHeight()-9,100>=o)return!1;d.$dom.find(".intro-bg").addClass("orientation-top")}else o=i.top+9;d.$dom.css({top:o,left:e}).show(),t.isFunction(i.callBack)&&i.callBack(!0),d.$dom.find(".intro-close").one("click",function(){d.$dom.remove()}),t("body").one("click",function(){d.$dom.remove()}),window.history&&t(window).on("popstate",function(){d.$dom.remove()}),n.getContext().message.listenSystem("list-view-scroll",function(){setTimeout(function(){d.$dom&&d.$dom.remove()})})},showBubbleTip:function(i){n.getContext().message.listen("hide-guide",function(){d.$dom.remove()});var o=n.getContext().message;if(!i.message)throw new Error("[openFileTip] The message of tip is must!");if(!i.left)throw new Error("[openFileTip] The positionX of tip is must!");if(!i.top)throw new Error("[openFileTip] The positionY of tip is must!");o.listen("hide-guide",function(){d.$dom.remove()}),this.renderAndEvent(i)}};e.exports=d});