define("function-widget-1:guide/context.js",function(t,n,e){var o=t("function-widget-1:guide/log.js"),i={context:null},c={getContext:function(){return i.context},setContext:function(t){i.context=t,t.log&&t.log.define&&t.log.define(o)}};e.exports=c});
;define("function-widget-1:guide/log.js",function(o,e,c){var i={mix:{show_welcome_guide:{logType:"count",description:"显示新版欢迎引导"},welcome_guide_begin:{logType:"count",description:"体验引导，点击立即体验按钮"},welcome_guide_close:{logType:"count",description:"体验引导，点击关闭按钮"},disk_home_coupon_banner_display:{logType:"count",description:"网盘优惠券广告位展现"},coupon_consume_active_banner_click:{logType:"count",description:"网盘优惠券广告位点击"},coupon_consume_active_banner_close:{logType:"count",description:"网盘优惠券广告位关闭"},disk_home_dialog_consume_coupon_click:{logType:"count",description:"网盘优惠券领取成功"},disk_home_gift_banner_display:{logType:"count",description:"网盘满赠广告位展现"},show_picNew_guide:{logType:"count",description:"显示图片分类引导"},picNew_guide_close:{logType:"count",description:"关闭图片分类引导，点击[去看看]"},cardHolder_activity_show:{logType:"count",description:"卡包活动引导"},cardHolder_activity_close:{logType:"count",description:"卡包活动引导关闭"},cardHolder_activity_addBtn_enter_cardholder:{logType:"count",description:"卡包活动引导点击立即添加进入卡包"},cardHolder_activity_addBtn_click:{logType:"count",description:"卡包活动引导点击立即添加"},cardHolder_importDialog_show:{logType:"count",description:"卡包一键导入"},cardHolder_import_close:{logType:"count",description:"卡包一键导入引导关闭"},cardHolder_import_recognition_click:{logType:"count",description:"卡包一键导入引导点击立即识别"},cardHolder_import_recognition_success:{logType:"count",description:"卡包一键导入引导识别成功"},cardHolder_import_keyimport_click:{logType:"count",description:"卡包一键导入引导点击一键导入"},cardHolder_import_enter_cardholder:{logType:"count",description:"卡包一键导入引导进入到卡包"},cardHolder_import_keyimport_success:{logType:"count",description:"卡包一键导入导入成功"}," cardHolder_import_keyimport_fail":{logType:"count",description:"卡包一键导入导入失败"}}};c.exports=i});
;define("function-widget-1:guide/guideQueue.js",function(e,t,s){function i(e){return this instanceof i?(this.params=e||null,this.list=[],this.hashChangeList=[],this.selectChangeList=[],this.currentHash={module:r.getCurrentModule()||"",vmode:r.getCurrentParams().vmode||"",path:r.getCurrentParams().path||"",type:r.getCurrentParams().type||"",key:r.getCurrentParams().key||""},this.listenHashChange(),void this.listenSelectChange()):new i(e)}var n=e("function-widget-1:guide/context.js"),a=e("base:widget/storage/storage.js"),r=e("base:widget/historyManager/historyManager.js"),h=e("base:widget/hash/hash.js"),o=e("system-core:system/baseService/message/message.js"),u=e("base:widget/tools/service/tools.url.js"),l=e("base:widget/libs/underscore.js"),g=e("base:widget/libs/jquerypacket.js"),c=1,p=2,f=3;i.prototype.setParams=function(e){this.params=e},i.prototype.enqueue=function(e){l.isArray(e)?[].push.apply(this.list,e):this.list.push(e),this.getHashChangeQueue(),this.getSelectChangeQueue(),this.removeNotInFirstQueue()},i.prototype.getHashChangeQueue=function(){for(var e=0;e<this.list.length;e++)if(this.list[e].hashChange){var t=g.extend(!0,{},this.list[e]);this.hashChangeList.push(t)}},i.prototype.getSelectChangeQueue=function(){for(var e=0;e<this.list.length;e++)if(this.list[e].selectChange){var t=g.extend(!0,{},this.list[e]);this.selectChangeList.push(t)}},i.prototype.removeNotInFirstQueue=function(){for(var e=this.list.length-1;e>=0;e--)this.list[e].notInFirstQueue&&this.list.splice(e,1)},i.prototype.patchHash=function(){var e={module:r.getCurrentModule()||"",vmode:r.getCurrentParams().vmode||"",path:r.getCurrentParams().path||"",type:r.getCurrentParams().type||"",key:r.getCurrentParams().key||""},t={};for(var s in this.currentHash)this.currentHash[s]!==e[s]&&(t[s]=e[s]);return this.currentHash=e,t},i.prototype.listenHashChange=function(){var e=this,t=!1;h.listen(function(){if(!t&&(t=!0,setTimeout(function(){t=!1},100),0!==e.hashChangeList.length)){var s=e.patchHash();e.list=[];for(var i=0;i<e.hashChangeList.length;i++){var n=e.hashChangeList[i].hashChange;try{if("object"==typeof n){for(var a in n)if(s.hasOwnProperty(a)&&(s[a]===n[a]||"*"===n[a])){var r=g.extend(!0,{},e.hashChangeList[i]);e.list.push(r);break}}else if("boolean"==typeof n&&n===!0){var r=g.extend(!0,{},e.hashChangeList[i]);e.list.push(r)}}catch(h){continue}}e.list.length>0&&e.dequeue()}})},i.prototype.listenSelectChange=function(){function e(){var e=n.getContext().getList().getCheckedItems();if(0!==e.length&&0!==s.selectChangeList.length){s.list=[];for(var t=0;t<s.selectChangeList.length;t++){var i=s.selectChangeList[t].selectChange;try{if("object"==typeof i){var a=!0,r=i.filesLimit;r&&(/^\d+$/.test(r)?e.length===+r?a:a=!1:/^<\d+$/.test(r)?e.length<r.substring(1)?a:a=!1:/^>\d+$/.test(r)&&(e.length>r.substring(1)?a:a=!1));var h=i.type;if(h&&"*"!==h)for(var o=0;o<e.length;o++)if("dir"===h&&0===+e[o].isdir)a=!1;else if("dir"!==h){var u=e[o].server_filename.split("."),l=u[u.length-1];h===l?a:a=!1}a&&s.list.push(s.selectChangeList[t])}else"boolean"==typeof i&&i===!0&&s.list.push(s.selectChangeList[t])}catch(g){continue}}s.list.length>0&&s.dequeue()}}var t,s=this;o.listen("system-checked-changed",function(){clearTimeout(t),t=setTimeout(function(){e()},0)})},i.prototype.dequeue=function(){this._dequeue()},i.prototype.preHandle=function(){var e=this.list.shift();if(!e)return c;var t=e.key?a.getItem(e.key):"",s=e.pageType?e.pageType:"",i=e.pageFrom?e.pageFrom:"",n=e.period?e.period.start:"",h=e.period?e.period.termination:"",o=(new Date).getTime(),g=!!t,p=r.getCurrentModule(),d=!0,y=!0;if(l.isFunction(e.checkStorageItem)&&(g=e.checkStorageItem(t)),n&&h&&(n>o||o>h?y=!1:""),s&&s.length>0&&(-1!==s.indexOf(p)&&p?"":d=!1),i&&i.length>0){var m=u.getParam("jumpFrom");if(-1!==i.indexOf(m))return!e.ignore&&y&&d?e:f}return!e.ignore&&y&&!g&&d?e:f},i.prototype._dequeue=function(e,t){var s;if(void 0===e){var i=this.preHandle();if(l.isObject(i))s=i;else{if(i!==f)return;this._dequeue()}}else e?(s=this.list.shift(),t&&(s.data=t)):this._dequeue();if(l.isObject(s))if(s.asyncCanShow!==!0){var n=this._guideHandle(s);if(n!==f)return;this._dequeue()}else{if(!l.isFunction(s.canShow))throw new Error("If the asyncCanShow has been set true,and the canShow was must be a function.");var a=s.canShow;s.asyncCanShow=void 0,s.canShow=void 0,this.list.unshift(s),a(this.params)}},i.prototype.goAhead=function(e,t){this.list[0].canShow=e,this._dequeue(e,t)},i.prototype._guideHandle=function(t){if(l.isFunction(t))t();else{var s=this.params,i=l.isFunction(t.canShow)?t.canShow(s):t.canShow;if(void 0===i&&(i=!0),!i)return f;if(t.path?e.async(t.path,function(e){e.show(s,t.data)}):t.callback&&(t.delay>0?setTimeout(t.callback,t.delay):t.callback()),!t.ManualKeyOperate&&t.key&&a.setItem(t.key,!0),t.goNext===!1)return p}return f},s.exports=i});
;define("function-widget-1:guide/start.js",function(e,t,i){var o=e("base:widget/libs/jquerypacket.js"),a=e("function-widget-1:guide/context.js"),n=e("system-core:system/baseService/message/message.js"),r=e("function-widget-1:guide/guideQueue.js"),s=e("base:widget/storage/storage.js"),c=e("base:widget/historyManager/historyManager.js"),g=r(),u=window.yunData,d="discovery-tips-dialog-display",p="_vip_wizard_display",l="flag_show_functions_.doc_.docx_.ppt_.pptx_.xls_.xlsx_",f=(u.MYNAME+"_director_guide","flag_show_functions_"),h={category:[".mm",".xmind",".mmap"],message:"单击即可查看思维导图，免去下载烦恼~"},y={category:[".dxf",".dwt",".dwg",".dws"],message:"单击即可查看CAD，免去下载烦恼~"},w={category:[".zip",".rar"],message:"单击即可查看压缩包，免去下载烦恼~"},m=function(e){var t,i,o=a.getContext().list;return o.mapFirstFileByCategory(e,function(e,o){var a=o.offset().top,n=o.offset().left+12;return t?t>a&&(t=a,i=n):(t=a,i=n),!0}),t&&i?{left:i,top:t}:void 0};g.enqueue([{hashChange:!0,asyncCanShow:!0,pageType:"sharedir",canShow:function(){var e=c.getCurrentParams().path;"/"===e?(n.once("after-share-dir-root-diffall",function(e){if(e.length>0){var t=a.getContext().tools.shareDirManager;t.diffAll.removeDiffMsg("shareDirRoot"),g.goAhead(!0,e)}else g.goAhead(!1)}),n.trigger("after-share-dir-root-guide")):g.goAhead(!1)},path:"function-widget-1:guide/util/shareDirTip/shareDirRootChange.js",goNext:!1},{hashChange:!0,pageType:"list",canShow:function(){var e=a.getContext().tools.shareDirManager;if(!e)return!1;for(var t=e.diffAll.dismissMsgList,i=c.getCurrentParams().path,o=0;o<t.length;o++)if(t[o].path===i)return e.diffAll.removeDiffMsg("dismiss",i),!0;return!1},path:"function-widget-1:guide/util/shareDirTip/setShareDismiss.js",goNext:!1},{key:"christmas_2017_uk_"+u.MYUK,ManualKeyOperate:!0,pageFrom:["buycenter"],canShow:function(){return 1===u.LOGINSTATUS},path:"function-widget-1:guide/util/promo/promo.js",goNext:!1},{key:"showAblity_uk_"+u.MYUK,asyncCanShow:!0,pageType:"list",canShow:function(){o.ajax({url:"/api/account/rookie?type=8",dataType:"json",success:function(e){g.goAhead(0===e.errno&&e.list&&0===+e.list[8])},error:function(){g.goAhead()}})},path:"function-widget-1:guide/util/ablityShow/ablityShow.js",goNext:!1},{asyncCanShow:!0,pageType:"list",key:u.MYUK+"_card_space",checkStorageItem:function(e){return e&&"true"===e},canShow:function(){o.ajax({url:"/aipic/cardcatalog/addvolume?isadd=0",dataType:"json",success:function(e){g.goAhead(0===e.errno&&0===e.status&&"undefined"!=typeof e.msg,e)},error:function(){g.goAhead(!1)}})},path:"function-widget-1:guide/util/cardHolder/cardHolderGiveSpace/cardHolderGiveSpace.js",goNext:!1},{asyncCanShow:!0,pageType:"list",checkStorageItem:function(){var e=s.getItem(u.MYUK+"_card_import"),t=e?e:"";if(t&&"false"===t)return!1;if(t.indexOf("_")>-1){var i=t.split("_");if("true"===i[0])return!0;var o=Date.parse(new Date)-parseInt(i[1],10),a=o>864e5?!1:!0;return a}return!1},canShow:function(){o.ajax({url:"/aipic/cardcatalog/importable",dataType:"json",success:function(e){g.goAhead(0===e.errno&&e.importable,e)},error:function(){g.goAhead(!1)}})},path:"function-widget-1:guide/util/cardHolder/cardHolderKeyImport/cardHolderKeyImport.js",goNext:!1},{asyncCanShow:!0,pageType:"list",key:u.MYUK+"_card_tip",canShow:function(){localStorage.getItem(u.MYUK+"_card_tip")?g.goAhead(!1):o.ajax({url:"/aipic/cardcatalog/newuser",dataType:"json",success:function(e){g.goAhead(0===e.errno&&e.newuser)},error:function(){g.goAhead()}})},path:"function-widget-1:guide/util/cardHolder/cardHolderTip/cardHolderTip.js",goNext:!1},{key:"guideShareDirTip_"+u.MYUK,pageType:"list",canShow:function(){return!0},path:"function-widget-1:guide/util/shareDirTip/shareDirTip.js",goNext:!1},{ignore:!0,asyncCanShow:!0,pageType:"list",canShow:function(){s.getItem("picNewNotice")||o.ajax({url:"/api/categorylist",dataType:"json",data:{category:3},success:function(e){e&&0===e.errno&&e.info&&e.info.length>0&&o.ajax({url:"/api/account/rookie?type=16",dataType:"json",success:function(e){g.goAhead(0===e.errno&&e.list&&0===+e.list[16]),s.setItem("picNewNotice",!0),a.getContext().log.send({type:"show_picNew_guide"})},error:function(){g.goAhead()}})},error:function(){g.goAhead()}})},path:"function-widget-1:guide/util/picNewTip/picNewTip.js",goNext:!1},{ignore:!0,key:u.MYNAME+"classifyTip",canShow:window.location.href.indexOf("timeline")>-1,path:"function-widget-1:guide/util/classifyTip/classifyTip.js",goNext:!1},{ignore:!0,key:u.MYNAME+p,canShow:0!==u.ISVIP,path:"function-widget-1:guide/util/vipTip/vipTip.js"},{canShow:function(e){return e?e.hasOwnProperty("isVip"):!1},path:"function-widget-1:guide/util/trialVipTip/trialVipTip.js"},{ignore:!0,key:d,path:"function-widget-1:guide/util/mboxTip/mboxTip.js",goNext:!1},{path:"function-widget-1:guide/util/enterpriseTip/enterpriseTip.js"},{path:"function-widget-1:guide/util/directorTip/directorTip.js"},{delay:500,callback:function(){if(!s.getItem(l)){var t=o(".g-button .icon-edit").parents(".g-button");if(t.length&&0===o(".list-header-operate .opacity-button-box").length&&"none"!==t.css("display")){var i=t.offset(),a=t.height()||0;e.async("function-widget-1:guide/util/openFileTip/openFileTip.js",function(e){e.showBubbleTip({message:"文档支持在线编辑啦，免去下载烦恼~",left:i.left,top:i.top+a,callback:function(){s.setItem(l,!0)}})})}}}},{delay:2e3,canShow:function(){return!!a.getContext().getList()},callback:function(){var t,i,o,a=!1;s.getItem(f+h.category.join("_"))||(t=f+h.category.join("_"),i=m(h.category),i&&(a=!0),o=h),a!==!1||s.getItem(f+y.category.join("_"))||(t=f+y.category.join("_"),i=m(y.category),i&&(a=!0),o=y),a!==!1||s.getItem(f+w.category.join("_"))||(t=f+w.category.join("_"),i=m(w.category),i&&(a=!0),o=w),t&&a&&o&&e.async("function-widget-1:guide/util/openFileTip/openFileTip.js",function(e){e.showBubbleTip({message:o.message,left:i.left,top:i.top,orientation:"top",callBack:function(){s.setItem(t,1)}})}),window.yunHeader&&window.yunHeader.fontIe&&window.yunHeader.fontIe.api&&window.yunHeader.fontIe.api.doAddIcon()}}]),i.exports={start:function(e,t){return a.setContext(e),t&&t.message?void a.getContext().message.trigger(t.message):void(window.location.href.indexOf("category/type=3")<0&&(g.setParams(t),g.dequeue()))}}});